<!DOCTYPE html>
<!-- saved from url=(0057)http://www.ovirt.org/documentation/user-guide/user-guide/ -->
<html class=" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" lang="ru"><!-- <![endif] --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>
OVirt User Guide —
oVirt
</title>
<meta charset="utf-8">
<meta content="" name="description">
<meta content="" name="author">
<meta content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" name="viewport">

<link href="http://www.ovirt.org/images/favicon.ico" rel="shortcut icon">
<link href="http://www.ovirt.org/images/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed">
<link href="http://www.ovirt.org/images/apple-touch-icon-57x57-precomposed.png" rel="apple-touch-icon-precomposed" sizes="57x57">
<link href="http://www.ovirt.org/images/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72">
<link href="http://www.ovirt.org/images/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114">
<link href="./OVirt User Guide — oVirt_files/application.css" rel="stylesheet" type="text/css">
<link href="./OVirt User Guide — oVirt_files/print.css" rel="stylesheet" type="text/css" media="print">
<style type="text/css"></style><style type="text/css"></style><link rel="stylesheet" type="text/css" href="chrome-extension://pkehgijcmpdhfbdbbnkijodmdjhbjlgp/skin/socialwidgets.css"></head>
<body class=" source-md">
<header class="masthead hidden-print" id="branding" role="banner">
<section class="hgroup">
<h1>
<a href="http://www.ovirt.org/"><img id="logo" class="logo is-svg" alt="oVirt" src="./OVirt User Guide — oVirt_files/logo.svg">
</a></h1>
</section>
<div id="access">
<nav role="navigation">
<ul class="nav nav-pills">
<li class="nav-link-home" role="menuitem">
<a href="http://www.ovirt.org/">Домашняя страница</a>
</li>

<li class="nav-link-blog" role="menuitem">
<a href="http://www.ovirt.org/blog/">Блог</a>
</li>

<li class="nav-link-download" role="menuitem">
<a href="http://www.ovirt.org/download/">Загрузки</a>
</li>

<li class="nav-link-documentation" role="menuitem">
<a href="http://www.ovirt.org/documentation/">Документация</a>
</li>

<li class="nav-link-develop" role="menuitem">
<a href="http://www.ovirt.org/develop/">Разработка</a>
</li>

<li class="nav-link-community" role="menuitem">
<a href="http://www.ovirt.org/community/">Сообщество</a>
</li>

<li class="nav-link-search" role="menuitem">
<a href="http://www.ovirt.org/search/">Поиск</a>
</li>

</ul>
</nav>

</div>
</header>

<section class="page-wrap" id="page-wrap">
<section class="page" id="page">
<ul class="breadcrumb">
<li><a href="http://www.ovirt.org/documentation/">Документация</a></li>
<li><a href="http://www.ovirt.org/documentation/user-guide/">Руководство пользователя</a></li>
<li class="active">Руководство пользователя OVirt</li>
</ul>

<section class="container content" id="content">
<div class="alert alert-warning">
<div class="pull-right">
<a>Наведите курсор для подробностей</a>
</div>
<div class="frontmatter-metadata">
<table class="metadata">
<caption>Метаданные Frontmatter</caption>
<tbody><tr>
<th>название</th>
<td>Руководство пользователя OVirt</td>
</tr>
<tr>
<th>категория</th>
<td>документация</td>
</tr>
<tr>
<th>авторы</th>
<td>bproffitt</td>
</tr>
<tr>
<th>заголовок_wiki</th>
<td>OVirt User Guide</td>
</tr>
<tr>
<th>номер_ревизии_wiki</th>
<td>2</td>
</tr>
<tr>
<th>последнее_обновление_wiki</th>
<td>2014-10-03</td>
</tr>
</tbody></table>
</div>
Оригинал страницы на Wiki:
<a href="http://old.ovirt.org/OVirt_User_Guide" target="_blank">
OVirt User Guide
</a>
</div>

<!--[if lt IE 7]>
<p class="chromeframe">You are using an outdated browser.
<a href="http://browsehappy.com/">Upgrade your browser today</a> or
<a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->
<h1 id="ovirt-user-guide">Руководство пользователя OVirt</h1>

<h2 id="accessing-the-user-portal">Доступ на Пользовательский портал</h2>

<h3 id="logging-in-to-the-user-portal">Авторизация на Пользовательском портале</h3>

<p>Прямая авторизация на Пользовательском портале oVirt через веб-браузер.</p>

<p><strong>Действие 1.1. Авторизация на Пользовательском портал</strong></p>

<ol>
  <li>
    <p>Введите предоставленный <strong>адрес URL Пользовательского портала</strong> в адресную строку браузера. Адрес должен иметь формат <code>https://server.example.com/UserPortal</code>. Будет показан экран авторизации. Как вариант, в браузере можно указать предоставленный <strong>адрес сервера</strong> и получить сначала доступ к экрану приветствия, а затем нажать на ссылку <strong>Пользовательский портал</strong>.</p>

    <p>⁠</p>

    <p><img alt="The User Portal Login Selection Screen" title="The User Portal Login Selection Screen" src="./OVirt User Guide — oVirt_files/Portal_Selection.png"></p>

    <p><strong>Рисунок 1.1. Экран выбора авторизации на Пользовательском портале</strong></p>
  </li>
  <li>
    <p>Введите <strong>имя пользователя</strong> и <strong>пароль</strong>. Для выбора необходимого домена используйте выпадающее меню <strong>Домен</strong>.
⁠</p>

    <p><img alt="The User Portal Login Screen" title="The User Portal Login Screen" src="./OVirt User Guide — oVirt_files/User_Portal_Login.png"></p>

    <p><strong>Рисунок 1.2. Экран авторизации на Пользовательском портале</strong></p>

    <ul>
      <li>Если выполняется только одна виртуальная машина, отметьте флажок <strong>Подключиться автоматически</strong> для прямого подключения к ВМ.</li>
      <li>Если выполняется больше одной ВМ или нет необходимости в атоматическом подключении, этот флажок отмечать не нужно.</li>
      <li>Выберите желаемый язык интерфейса Пользовательского портала в выпадающем меню в нижнем правом углу окна авторизации.</li>
    </ul>
  </li>
  <li>
    <p>Нажмите на кнопку <strong>Авторизация</strong>. Будет показан список виртуальных машин, назначенных данному пользователю.
⁠</p>

    <p><img alt="User Portal" title="User Portal" src="./OVirt User Guide — oVirt_files/User_Portal.png"></p>

    <p><strong>Рисунок 1.3. Пользовательский портал</strong></p>
  </li>
</ol>

<h3 id="logging-out-of-the-user-portal">Завершение сеанса на Пользовательском портале</h3>

<p>⁠</p>

<p><strong>Как завершить сеанс на Пользовательском портале:</strong></p>

<ul>
  <li>На панели заголовка Пользовательского портала нажмите на кнопку <strong>Выйти из системы</strong>. Сеанс завершится, и будет показан экран авторизации на Пользовательском портале.</li>
</ul>

<h3 id="logging-in-for-the-first-time-installing-the-engine-certificate">Первичная авторизация: установка сертификата Центра Управления oVirt</h3>

<h4 id="installing-ovirt-certificate-in-firefox">Установка сертификата oVirt в Firefox</h4>

<p><strong>Описание задачи</strong></p>

<p>Выполняя первичный доступ на Пользовательский портал, для избежания предупреждений системы безопасности, необходимо установить сертификат, используемый oVirt.</p>

<p>⁠</p>

<p><strong>Действие 1.2. Установка сертификата oVirt в Firefox</strong></p>

<ol>
  <li>Перейдите по адресу URL Пользовательского портала в браузере Firefox.</li>
  <li>Нажмите на кнопку <strong>Добавить исключение</strong> чтобы открыть окно <strong>Добавить исключение безопасности</strong>.</li>
  <li>Убедитесь, что флажок <strong>Постоянно хранить это исключение</strong> отмечен.</li>
  <li>Нажмите на кнопку <strong>Подтвердить исключение безопасности</strong>.</li>
</ol>

<p><strong>Результат</strong></p>

<p>Сертификат, используемый Red Hat Enterprise Virtualization Manager, был установлен, и при получении доступа к Пользовательскому порталу предупреждения системы безопасности больше не появляются.</p>

<h2 id="installing-supporting-components">Установка компонентов поддержки</h2>

<h3 id="installing-console-components">Установка компонентов консоли</h3>

<h4 id="console-components">Компоненты консоли</h4>

<p>Консоль — это графическое окно, с помощью которого можно просматривать экран запуска ВМ, экран выключения ВМ и рабочий стол ВМ, а также работать с этой виртуальной машиной точно также, как и с любой физической. Стандартным приложением для открытия консоли ВМ в OVirt является Удалённый просмотрщик, который сначала необходимо установить на клиентской машине.</p>

<h4 id="installing-remote-viewer-on-linux">Установка удалённого просмотрщика в Linux</h4>

<p>Удалённый просмотрщик — это приложение, открывающее графическую консоль, подключённую к виртуальным машинам. Удалённый просмотрщик является клиентом SPICE и включён в пакет virt-viewer, предоставляемый каналом ПО <code>Red Hat Enterprise Linux Workstation (v. 6 for x86_64)</code>.</p>

<p><strong>Действие 2.1. Установка удалённого просмотрщика в Linux</strong></p>

<ol>
  <li>
    <p>Установите пакет spice-xpi и его зависимости с помощью следующей команды:
    # yum install spice-xpi</p>
  </li>
  <li>
    <p>Проверьте, не установлен ли уже пакет <strong>virt-viewer</strong> в системе:
    # rpm -q virt-viewer
    virt-viewer-0.5.2-18.el6_4.2.x86_64</p>

    <p>Если пакет virt-viewer ещё не был установлен, выполните следующую команду для установки этого пакета и его зависимостей:</p>

<pre class="highlight plaintext"><code># yum install virt-viewer
</code></pre>
  </li>
  <li>
    <p>Перезапустите Firefox для применения изменений.</p>
  </li>
</ol>

<p>Модуль SPICE теперь установлен, и можно подключаться к виртуальным машинам, используя протокол SPICE.</p>

<h2 id="the-basic-tab">⁠Вкладка Базовый</h2>

<h3 id="basic-tab-graphical-interface">Графический интерфейс вкладки Базовый</h3>

<p>Вкладка <strong>Базовый</strong> предоставляет обзор и доступ к использованию всех доступных данному пользователю виртуальных машин. Экран разделён на три  области: панель заголовка, область виртуальных машин и область сведений. Набор кнопок управления служит для работы с виртуальными машинами.</p>

<p><img alt="The User Portal" title="The User Portal" src="./OVirt User Guide — oVirt_files/User_Portal_Callouts.png"></p>

<p><strong>Рисунок 3.1. Пользовательский портал</strong></p>

<p>Панель заголовка (1) показывает имя <strong>пользователя</strong>, выполнившего вход на портал, а также кнопку <strong>Выйти из системы</strong>.</p>

<p>В области виртуальных машин показаны имена ВМ или пулы ВМ, назначенные данному пользователю (2). Также показывается логотип операционной системы, установленной на ВМ (3). Если машина включена, к ней можно подлючиться, выполнив двойной щелчок по этому логотипу.</p>

<p>Кнопки, расположенные на значке каждой ВМ, позволяют запустить, остановить или приостановить выполнение виртуальной машины. Эти кнопки аналогичны кнопкам стандартного медиа-плеера (4).</p>

<ul>
  <li><img alt="" title="fig:Up.png" src="./OVirt User Guide — oVirt_files/VM_Powered_Up.png"> Зелёная кнопка Пуск запускает выполнение ВМ. Она доступна, если в данный момент ВМ приостановлена, остановлена или выключена.</li>
  <li><img alt="" title="fig:Down.png" src="./OVirt User Guide — oVirt_files/Down.png"> Красная кнопка Стоп останавливает выполнение ВМ. Она доступна, если в данный момент ВМ выполняется.</li>
  <li><img alt="" title="fig:Suspend.png" src="./OVirt User Guide — oVirt_files/Suspend.png"> Синяя кнопка паузы временно приостанавливает выполнение ВМ. Чтобы запустить машину снова, нажмите зелёную кнопку пуска.</li>
  <li><img alt="" title="fig:Reboot.png" src="./OVirt User Guide — oVirt_files/Reboot.png"> Зелёная кнопка перезапуска выполняет перезагрузку ВМ. Она доступна, если в данный момент машина выполняется.</li>
</ul>

<p>Статус виртуальной машины показан текстом под значком ВМ — <strong>Машина готова</strong> или <strong>Машина выключена</strong>.</p>

<p>Нажав на виртуальную машину, можно увидеть статистику этой машины на панели сведений справа (5), включая информацию об установленной операционной системе, определённой памяти, числе ядер и размере виртуального диска. Также можно настроить параметры протокола подключения (6), например, включить использования устройств USB или локальных дисков.</p>

<h3 id="running-virtual-machines">Работа виртуальных машин</h3>

<h4 id="running-virtual-machines---overview">Работа виртуальных машин — обзор</h4>

<p>На Пользовательском портале виртуальные машины представлены значками, указывающими тип и статус машины. Значки отражают, является ли соответствующая ВМ частью пула машин или это отдельная Windows или Linux-машина, а также работает ли машина или же остановлена.</p>

<p>Пользовательский портал показывает список назначенных виртуальных машин. Через портал можно запустить одну или несколько машин, подключиться к ним и выполнить авторизацию, получить доступ к машинам с разными установленными ОС, а также работать с несколькими виртуальными машинами одновременно.</p>

<p>И наоборот, если имеется только одна запущенная ВМ и активировано автоматическое подключение, то на машине можно авторизоваться напрямую, минуя Пользовательский портал, точно также, как это происходит на физической машине.</p>

<h4 id="turning-on-a-virtual-machine">Включение виртуальной машины</h4>

<p>Чтобы начать работать с ВМ, представленой на Пользовательском портале, машину надо запустить и затем к ней подключиться. Если ВМ выключена, то значок машины затенён и показана надпись <strong>Машина выключена</strong>.</p>

<p>Пользователю может быть назначена индивидуальная ВМ, или же пользователь может быть прикреплён к одной или более ВМ, являющихся частью пула ВМ. Виртуальные машины в пуле являются клонами базового шаблона, на них установлен одинаковый набор приложений и одна и та же ОС.</p>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> при выборе ВМ из пула нет гарантии того, что каждый раз будет выбрана одна и та же машина. Но при настройке консольных параметров для ВМ из пула, эти параметры сохраняются как стандартные для всех машин этого пула.</p>

</div>
<p>⁠</p>

<p><strong>Действие 3.1. Включение виртуальной машины</strong></p>

<ol>
  <li>Чтобы включить отдельную ВМ или выбрать ВМ из пула:
    <ul>
      <li>
        <p>Чтобы запустить отдельную ВМ, выберите значок машины и нажмите на кнопку <img alt="" title="fig:Up.png" src="./OVirt User Guide — oVirt_files/VM_Powered_Up.png">.
⁠</p>

        <p><img alt="Запустить ВМ" title="Запустить ВМ" src="./OVirt User Guide — oVirt_files/VM_Powered_Down.png"></p>

        <p><strong>Рисунок 3.2. Включение виртуальной машины</strong></p>
      </li>
      <li>
        <p>Чтобы забрать ВМ из пула, выберите пул машин и нажмите на кнопку <img alt="" title="fig:Up.png" src="./OVirt User Guide — oVirt_files/VM_Powered_Up.png">.
⁠</p>

        <p><img alt="Take virtual machine from a pool" title="Забрать машину из пула" src="./OVirt User Guide — oVirt_files/VM_From_Pool.png"></p>

        <p><strong>Рисунок 3.3. Выбрать ВМ из пула</strong></p>

        <p>Если в пуле машин есть доступная машина, значок этой машины будет присутствовать в списке, и дальнейшие действия применяются к этой виртуальной машине. Если из пула можно взять несколько машин, то при выборе максимально доступного количества машин из этого пула, значок этого пула сменится значком последней выбранной машины.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Виртуальная машина запускается.
⁠</p>

    <p><img alt="Virtual machine powering up" title="Виртуальная машина запускается" src="./OVirt User Guide — oVirt_files/Extended_VM_Powering_Up.png"></p>

    <p><strong>Рисунок 3.4. Виртуальная машина запускается</strong></p>
  </li>
  <li>
    <p>Когда ВМ запускается, то её значок больше не затеняется, и выводится надпись <strong>Машина готова</strong>. Всё готово к подключению.
⁠</p>

    <p><img alt="Virtual machine turned on" title="ВМ включена" src="./OVirt User Guide — oVirt_files/VM_Powered_Up.png"></p>

    <p><strong>Рисунок 3.5. ВМ включена.</strong></p>
  </li>
</ol>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> к виртуальной машине можно подключиться только после её включения.</p>

</div>
<p>#### Подключение к работающей ВМ</p>

<p>После того, как ВМ была запущена, к ней можно подключаться, авторизоваться и начинать работу точно также, как это происходит на физической машине.</p>

<p><strong>Действие 3.2. Подключение к работающей ВМ</strong></p>

<ol>
  <li>
    <p>Чтобы подключиться к выбранной ВМ, сделайте двойной щелчок по её значку.
⁠</p>

    <p><img alt="Connect to Virtual Machine" title="Подключение к ВМ" src="./OVirt User Guide — oVirt_files/Extended_Connect_to_a_VM.png"></p>

    <p><strong>Рисунок 3.6. Подключение к ВМ</strong></p>
  </li>
  <li>
    <p>Появляется окно консоли виртуальной машины, и теперь с машиной можно работать точно также, как и с любым физическим рабочим столом.</p>
  </li>
</ol>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> при первом подключении с использованием SPICE будет выведено сообщение об установке соответствующего компонента или модуля SPICE. Если вы впервые подключаетесь с компьютера Red Hat Enterprise Linux, установите модуль SPICE для браузера Mozilla Firefox. Если подключение происходит с машины Windows, установите модуль ActiveX.</p>

</div>
<p>#### Завершение сеанса работы с ВМ</p>

<p>Рекомендуется завершить сеанс работы с ВМ перед её выключением, чтобы минимизировать риск потери данных. Кроме того, при попытке принудительного выключения машины через Пользовательский портал, машина может зависнуть со статусом <strong>Идёт выключение</strong>. Чтобы корректно выключить ВМ, выполните следующие действия.</p>

<p><strong>Действие 3.3. Выключение ВМ</strong></p>

<ol>
  <li>Завершение сеанса в гостевой ОС.</li>
  <li>Если работа с машиной происходила в полноэкранном режиме, нажмите <strong>Shift</strong>+<strong>F11</strong> для выхода из него, и затем закройте окно консоли виртуальной машины. Произойдёт возврат в окно Пользовательского портала.</li>
  <li>Для выключениея ВМ нажмите на кнопку <img alt="" title="fig:Down.png" src="./OVirt User Guide — oVirt_files/Down.png">. Значок ВМ затеняется, и после выключения будет показана надпись Машина выключена.</li>
</ol>

<h2 id="chapter-4-the-extended-tab">⁠Раздел 4. Вкладка Расширенный</h2>

<h3 id="the-extended-tab-graphical-interface">Графический интерфейс вкладки Расширенный</h3>

<p>Графический интерфейс вкладки <strong>Расширенный</strong> предоставляет доступ ко всем доступным данному пользователю виртуальным ресурсам и возможность ими управлять. Ниже рассказывается о весьми элементах вкладки <strong>Расширенный</strong>.</p>

<p><img alt="The Extended Tab" title="Вкладка Расширенный" src="./OVirt User Guide — oVirt_files/Extended_Tab_Callouts.png"></p>

<p><strong>Рисунок 4.1. Вкладка Расширенный</strong></p>

<p><strong>Таблица 4.1. Вкладка Расширенный</strong></p>

<table>
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead>
<tr class="header">
<th align="left"><p>Номер</p></th>
<th align="left"><p>Имя элемента</p></th>
<th align="left"><p>Описание</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>1</p></td>
<td align="left"><p>Панель заголовка</p></td>
<td align="left"><p>Показывает имя <strong>Пользователя</strong>, авторизованного на портале, и кнопку <strong>Выйти из системы</strong>.</p></td>
</tr>
<tr class="even">
<td align="left"><p>2</p></td>
<td align="left"><p>Вкладки различных режимов отображения Пользователького портала</p></td>
<td align="left"><p>Пользователи с соответствующими привилегиями имеют доступ как ко вкладке режима <strong>Расширенный</strong>, так и ко вкладке <strong>Базовый</strong>. Режим <strong>Базовый</strong> является стандартным режимом для пользователей с базовыми привилегиями.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>3</p></td>
<td align="left"><p>Панель навигации</p></td>
<td align="left"><p>Панель навигации позволяет переключаитться между вкладками Виртуальные машины, Шаблоны и Ресурсы.</p></td>
</tr>
<tr class="even">
<td align="left"><p>4</p></td>
<td align="left"><p>Панель управления</p></td>
<td align="left"><p>Панель управления позволяет создавать и изменять виртуальные машины.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>5</p></td>
<td align="left"><p>Список ВМ</p></td>
<td align="left"><p>Список ВМ, с указанием установленных ОС и статусами машин (выполняется, приостановлена или остановлена).</p></td>
</tr>
<tr class="even">
<td align="left"><p>6</p></td>
<td align="left"><p>Кнопки управления ВМ</p></td>
<td align="left"><p>С помощью кнопок управления виртуальные машины включаются, останавливаются, приостанавливаются или выключаются.</p>
<ul>
<li><img src="./OVirt User Guide — oVirt_files/Up.png" title="fig:Up.png" alt="Up.png"> Зелёная кнопка пуска включает машину. Она доступна, если в данный момент ВМ приостановлена, остановлена или выключена..</li>
<li><img src="./OVirt User Guide — oVirt_files/Down(1).png" title="fig:Down.png" alt="Down.png"> Красная кнопка Стоп останавливает выполнение ВМ. Она доступна, если в данный момент ВМ выполняется.</li>
<li><img src="./OVirt User Guide — oVirt_files/Suspend(1).png" title="fig:Suspend.png" alt="Suspend.png"> Синяя кнопка паузы временно приостанавливает выполнение ВМ. Чтобы запустить машину снова, нажмите зелёную кнопку пуска.</li>
<li><img src="./OVirt User Guide — oVirt_files/Power.png" title="fig:Power.png" alt="Power.png"> Кнопка питания выключает ВМ. Она доступна, если ВМ выполняется.</li>
<li><img src="./OVirt User Guide — oVirt_files/Reboot(1).png" title="fig:Reboot.png" alt="Reboot.png"> Зелёная кнопка перезапуска выполняет перезагрузку ВМ. Она доступна, если в данный момент машина выполняется.</li>
</ul></td>
</tr>
<tr class="odd">
<td align="left"><p>7</p></td>
<td align="left"><p>Кнопка консоли</p></td>
<td align="left"><p>Кнопка консоли запускает окно SPICE и подключается к включенным машинам.</p></td>
</tr>
<tr class="even">
<td align="left"><p>8</p></td>
<td align="left"><p>Панель сведений</p></td>
<td align="left"><p>Панель сведений отображает статистику машины, выбранной на панели навигации.</p></td>
</tr>
</tbody>
</table>

<p><strong>Вкладки панели сведений:</strong></p>

<ul>
  <li>Вкладка <strong>Общие</strong> показывает базовую аппаратную и программную информацию о машине, включая её имя, ОС, протокол экрана и определённую память.</li>
  <li>Вкладка <strong>Сетевые интерфейсы</strong> показывает имя, тип и скорость сети, подключенной к ВМ. В этой вкладке можно добавлять, изменять и удалять сетевые интерфейсы.</li>
  <li>Вкладка <strong>Диски</strong> показывает название, размер и формат диска, подключенного к ВМ. В этой вкладке можно добавлять, изменять и удалять виртуальные диски.</li>
  <li>Вкладка <strong>Снимки</strong> показывает обзор ОС и приложений машины. В этой вкладке можно создавать и использовать снимки.</li>
  <li>Вкладка <strong>Привилегии</strong> даёт обзор пользователей и ролей, присвоенных каждой ВМ. В этой вкладке можно присваивать и удалять привилегии пользователей.</li>
  <li>Вкладка <strong>События</strong> показывает отписание и дату событий, влияющих на ВМ.</li>
  <li>Вкладка <strong>Приложения</strong> показывает приложения, установленные на ВМ.</li>
  <li>Вкладка <strong>Монитор</strong> отображает статистику использования ЦП, памяти и сети для машины, выбранной на панели навигации.</li>
  <li>Вкладка <strong>Сеанс</strong> показывает IP адрес авторизованного пользователя, пользователя консоли и консольного клиента для машины, выбранной на панели навигации.</li>
</ul>

<h3 id="running-virtual-machines-1">Работающие ВМ</h3>

<h4 id="running-virtual-machines-introduction">Работающие ВМ: введение</h4>

<p>В этом разделе описывается, как с помощью Пользовательского портала запустить ВМ, подключиться к ВМ и остановить ВМ. Поддерживается возможность работы одновременно на нескольких ВМ или одновременно на машинах с разными ОС.</p>

<h4 id="connecting-to-virtual-machines">Подключение к ВМ</h4>

<p>После авторизации на портале можно запустить, остановить или подключиться к любой отображённой на портале ВМ.</p>

<p><strong>Описание задачи</strong></p>

<p>Следующее действие описывает, как остановить запущенную ВМ и как подключиться к ВМ.</p>

<p><strong>Действие 4.1. Подключение к ВМ</strong></p>

<ol>
  <li>
    <p>Выберите ВМ, к которой нужно подключиться, затем нажмите на кнопку Запуска <img alt="" title="fig:Up.png" src="./OVirt User Guide — oVirt_files/VM_Powered_Up.png">. Виртуальная машина начнёт работу.
<img alt="Virtual machine turned off" title="Выключенная ВМ" src="./OVirt User Guide — oVirt_files/Extended_VM_Powered_Down.png"></p>

    <p><strong>Роисунок 4.2. Выключенная ВМ</strong></p>

    <p>Значок остановки рядом с именем ВМ сменяется на значок выполняемого включения. После запуска машины, рядом с её именем будет показан значок запуска.</p>

    <p>⁠</p>

    <p><img alt="Virtual machine turned on" title="Включенная ВМ" src="./OVirt User Guide — oVirt_files/Extended_VM_Powering_Up.png"></p>

    <p><strong>Рисунок 4.3. ВМ запускается</strong></p>
  </li>
  <li>
    <p>Для подключения к ВМ нажмите кнопку <strong>Консоль</strong>.
⁠</p>

    <p><img alt="Connect to virtual machine" title="Подключиться к ВМ" src="./OVirt User Guide — oVirt_files/Extended_Connect_to_a_VM.png"></p>

    <p><strong>Рисунок 4.4. Подключиться к ВМ</strong></p>
  </li>
  <li>
    <p>При первом подключении с использованием протокола SPICE будет выведено сообщение об установке соответствующего компонента или модуля SPICE. Если подключение происходит с машины Windows, установите модуль ActiveX. Если подключение происходит с машины Red Hat Enterprise Linux, установите модуль SPICE для браузера Mozilla Firefox.</p>
  </li>
</ol>

<p>Далее будет показано консольное окно ВМ. Теперь с ВМ можно работать так же, как и с обычным физическим рабочим столом.</p>

<p><strong>Итог</strong></p>

<p>Мы запустили остановленную ВМ и подключились к ней.</p>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> согласно стандартным установкам, машина с установленной Windows 7 будет заморожена, если в течении часа была неактивна. Это препятствует подключению к такой машине с Пользовательского портала. Для избежания этой ситуации, отключите функции энегосбережения в параметрах управления питанием гостевой системы.</p>

</div>
<p>#### Выключение ВМ через Пользователский портал</p>

<p>При попытке выключения ВМ через Пользовательский портал, машина может зависнуть со статусом <strong>Идёт выключение</strong>, что является показателем того, что машина не завершила процесс выключения. Для корректного выключения ВМ через Пользовательский портал нужно выполнить следующие действия.</p>

<div class="alert alert-info">
  <p><strong>Важно:</strong> чтобы минимизировать риск потери данных, завершите сеанс работы на машине перед её выключением.</p>

</div>
<p><strong>Описание задачи</strong></p>

<p>Здесь рассказывается, как выключить ВМ через Пользовательский портал.</p>

<p><strong>Действие 4.2. Выключение ВМ через Пользовательский портал</strong></p>

<ol>
  <li>Выполните выход из гостевой ОС.</li>
  <li>Если работа с ВМ велась в полноэкранном режиме, нажмите <strong>Shift</strong>+<strong>F11</strong> для выхода из этого режима, затем закройте окно консоли ВМ. Будет выполнен возврат на Пользовательский портал.</li>
  <li>Чтобы выключить ВМ, нажмите на кнопку <img alt="" title="fig:Down.png" src="./OVirt User Guide — oVirt_files/Down.png">. После выключения ВМ, рядом с её именем появится значок Стоп.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы выключили виртуальную машину.</p>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> корректное выключение машины можно выполнить также с помощью средств операционной системы, установленной на самой машине. Например, в виртуальной машине с установленной Windows нужно нажать на кнопки <strong>Пуск</strong> → <strong>Завершить работу</strong>, а в машинах с установленной Red Hat Enterprise Linux нажать  <strong>Система</strong> → <strong>Выключение</strong>.</p>

</div>
<p>#### Перезагрузка ВМ через Пользовательский портал</p>

<div class="alert alert-info">
  <p><strong>Важно:</strong> чтобы минимизировать риск потери данных, закончите сеанс работы на ВМ перед её перезагрузкой.</p>

</div>
<p><strong>Описание задачи</strong></p>

<p>Здесь рассказывается, как перезагрузить ВМ через Пользовательский портал.</p>

<p>⁠</p>

<p><strong>Действие 4.3. Перезагрузка ВМ через Пользователсьикй портал</strong></p>

<ol>
  <li>Завершите сеанс работы в гостевой ОС.</li>
  <li>Если работа с ВМ велась в полноэкранном режиме, нажмите <strong>Shift</strong>+<strong>F11</strong> для выхода из этого режима, затем закройте окно консоли ВМ. Будет выполнен возврат на Пользовательский портал.</li>
  <li>Чтобы перезагрузить ВМ, нажмите кнопку <img alt="" title="fig:Reboot.png" src="./OVirt User Guide — oVirt_files/Reboot.png">. Во время перезагрузки ВМ рядом с её именем появляется значок Перезагрузка, который после окончания перезагрузки сменяется на значок Запуск.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы перезагрузили виртуальную машину.</p>

<h3 id="creating-virtual-machines">Создание виртуальных машин</h3>

<h4 id="creating-a-virtual-machine">Создание виртуальных машин</h4>

<p><strong>Описание задачи</strong></p>

<p>Виртуальную машину можно создать с помощью пустого шаблона, настроив все его параметры.</p>

<p><strong>Действие 4.4. Создание ВМ</strong></p>

<ol>
  <li>Нажмите на вкладку <strong>Виртуальные машины</strong>.</li>
  <li>
    <p>Нажмите на кнопку <strong>Новая ВМ</strong> и откройте окно <strong>Новая ВМ</strong>.
⁠</p>

    <p><img alt="The New Virtual Machine Window" title="Окно «Новая ВМ» src="./OVirt User Guide — oVirt_files/New_Virtual_Machine.png"></p>

    <p><strong>Рисунок 4.5. Окно «Новая ВМ»</strong></p>
  </li>
  <li>Во вкладке <strong>Общие</strong> заполните поля <strong>Имя</strong> и <strong>Операционная система</strong>. Параметры для других полей можно принять по умолчанию или изменить их по необходимости.</li>
  <li>Или же настроить параметры ВМ можно поочереди во вкладках <strong>Начальный запуск</strong>, <strong>Консоль</strong>, <strong>Хост</strong>, <strong>Выделение ресурсов</strong>, <strong>Параметры загрузки</strong> и <strong>Пользовательские параметры</strong>.</li>
  <li>Нажмите <strong>OK</strong> чтобы создать ВМ и закройте окно. Откроется окно <strong>Новая ВМ — Пошаговый помощник</strong>.</li>
  <li>С помощью кнопок «Пошагового помощника» завершите настройку или же нажмите на кнопку <strong>Настроить позже</strong> для закрытия окна.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Создаётся новая ВМ, которая появляется в списке ВМ со статусом <code>Отключена</code>. Перед тем, как начать работу с новой ВМ, необходимо добавить как минимум один сетевой интерфейс и один виртуальный диск, а также установить операционную систему.</p>

<h4 id="creating-a-virtual-machine-based-on-a-template">Создание ВМ на основе шаблона</h4>

<p><strong>Описание задачи</strong></p>

<p>Добавить новую ВМ можно на основе шаблона, что позволяет создавать преднастроенные ВМ с операционной системой, сетевыми интерфейсами, приложениями и другими ресурсами.</p>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> ВМ, созданная на основе шаблона, зависит от этого шаблона. Это означает, что нельзя удалить шаблон из Менеджера, если существуют ВМ, созданные на его основе. Чтобы удалить зависимость такой машины от шаблона, нужно создать ВМ клонированием из шаблона.</p>

</div>
<p><strong>Действие 4.5. Создание ВМ на основев шаблона</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong>.</li>
  <li>Нажмите кнопку <strong>Новая ВМ</strong> чтобы открыть окно <strong>Новая ВМ</strong>.</li>
  <li>Выберите <strong>Кластер</strong>, на котором будет выполняться ВМ.</li>
  <li>Выберите шаблон из выпадающего меню <strong>Основана на шаблоне</strong>.</li>
  <li>Выберите подверсию шаблона из выпадающего меню <strong>Подверсия шаблона</strong>.</li>
  <li>Введите <strong>Имя</strong>, <strong>Описание</strong> и любые <strong>Комментарии</strong>, и примите стандартные параметры для других полей, унаследованные из шаблона. При необходимости их можно изменить.</li>
  <li>
    <p>Перейдите на вкладку <strong>Распределение ресурсов</strong>.
⁠</p>

    <p><img alt="Provisioning - Thin" title="Provisioning - Thin" src="./OVirt User Guide — oVirt_files/New_Virtual_Machine_Resource_Allocation.png"></p>

    <p><strong>Рисунок 4.6. Тонкое резервирование</strong></p>
  </li>
  <li>Отметьте галочку <strong>Тонкое</strong> в области <strong>Выделение хранилища</strong>.</li>
  <li>Выберите политику выделения из выпадающего меню <strong>Политика выделения</strong>. Эта политика влияет на скорость операции клонирования и на размер дискового пространства, изначально требующегося новой ВМ.
    <ul>
      <li>Результатом выбора <strong>Тонкого резервирования</strong> является ускоренная операция клонирования и оптимизированное использование возможностей хранилища. Дисковое пространство выделяется по мере необходимости. Эти параметры выбираются по умолчанию.</li>
      <li>Результатом выбора пункта <strong>Предварительно выделенное</strong> является медленная операция клонирования и оптимизированные операции чтения/записи виртуальной машины. Всё дисковое пространство, требуемое шаблоном, выделяется сразу во время операции клонирования.</li>
    </ul>
  </li>
  <li>Используя выпадающе меню <strong>Таргет</strong>, выберите домен хранилища, где будет размещён диск ВМ.</li>
  <li>Нажмите <strong>OK</strong>.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Создаётся ВМ, которая появляется в списке машин на вкладке <strong>Виртуальные машины</strong>. Теперь можно выполнить вход на машине и начать с ней работу, или же назначить ей пользователей.</p>

<h4 id="creating-a-cloned-virtual-machine-based-on-a-template">Создание клонированной ВМ на основе шаблона</h4>

<p><strong>Описание задачи</strong></p>

<p>Клонированные ВМ аналогичны машинам, созданным на основе шаблона. Тем не менее, если клонированная ВМ наследует параметры точно также, как и ВМ, основанная на шаблоне, клонированная ВМ после своего создания не зависит от шаблона, на базе которого она была создана.</p>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> при клонировании ВМ из шаблона, имя этого шаблона показывается во вкладке <strong>Общие</strong> окна <strong>Изменить ВМ</strong> этой машины. Если изменить имя этого шаблона, то имя шаблона во вкладке <strong>Общие</strong> также обновится. Но если удалить шаблон из Менеджера, то во вкладке будет показано изначальное имя этого шаблона.</p>

</div>
<p>⁠</p>

<p><strong>Действие 4.6. Клонирование ВМ, основанной на шаблоне</strong></p>

<ol>
  <li>Перейдите во вкладку <strong>Виртуальные машины</strong>.</li>
  <li>Нажмите на кнопку <strong>Новая ВМ</strong> чтобы открыть окно <strong>Новая ВМ</strong>.</li>
  <li>Выберите <strong>Кластер</strong>, на котором будет выполняться машина.</li>
  <li>Выберите шаблон из выпадающего меню <strong>Основана на шаблоне</strong>.</li>
  <li>Выберите подверсию шаблона из выпадающего меню <strong>Подверсия шаблона</strong>.</li>
  <li>Введите <strong>Имя</strong>, <strong>Описание</strong> и любые <strong>Комментарии</strong>, и примите стандартные параметры для других полей, унаследованные из шаблона. При необходимости их можно изменить.</li>
  <li>
    <p>Перейдите на вкладку <strong>Распределение ресурсов</strong>.
⁠</p>

    <p><img alt="Provisioning - Clone" title="Распределение - Клон" src="./OVirt User Guide — oVirt_files/New_Virtual_Machine_Clone_Allocation.png"></p>

    <p><strong>Рисунок 4.7. Распределение — клон</strong></p>
  </li>
  <li>Отметьте галочку <strong>Клонировать</strong> в области <strong>Выделение хранилища</strong>.</li>
  <li>Выберите политику выделения диска в выпадающем меню <strong>Политика выделения</strong>. Эта политика влияет на скорость операции клонирования и на размер дискового пространства, изначально требующегося новой ВМ.
    <ul>
      <li>Результатом выбора <strong>Тонкого резервирования</strong> является ускоренная операция клонирования и оптимизированное использование возможностей хранилища. Дисковое пространство выделяется тоько по мере необходимости. Эти параметры выбираются по умолчанию.</li>
      <li>Результатом выбора пункта <strong>Предварительно выделенное</strong> является медленная операция клонирования и оптимизированные операции чтения/записи виртуальной машины. Всё дисковое пространство, требуемое шаблоном, выделяется сразу во время операции клонирования.</li>
    </ul>
  </li>
  <li>В выпадающем меню <strong>Таргет</strong> выберите домен хранилища, где будет расположен виртуальный диск ВМ.</li>
  <li>Нажмите <strong>OK</strong>.</li>
</ol>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> операция клонирования ВМ может занять некоторое время. Должна быть создана новая копия диска шаблона. В течение этого времени ВМ будет иметь сначала статус <strong>Образ заблокирован</strong>, а затем <strong>Выключена</strong>.</p>

</div>
<p><strong>Итог</strong></p>

<p>Виртуальная машина создаётся и появляется в списке машин на вкладке <strong>Виртуальные машины</strong>. Теперь ей можно присвоить пользователей, и начать работу по окончании операции клонирования.</p>

<h3 id="configuring-virtual-machines">Настройка виртуальных машин</h3>

<h4 id="completing-the-configuration-of-a-virtual-machine-by-defining-network-interfaces-and-hard-disks">Завершение настройки параметров ВМ: выделение сетевых интерфейсов и жёстких дисков</h4>

<p><strong>Описание задачи</strong></p>

<p>Перед началом использования только что созданной ВМ, в окне <strong>Пошагового помощника</strong> будет предложено настроить как минимум один сетевой интерфейс и один виртуальный диск для машины.</p>

<p><strong>Действие 4.7. Завершение настройки ВМ: определение сетевых интерфейсов и выделение жёстких дисков</strong></p>

<ol>
  <li>В окне <strong>Новая ВМ — Пошаговый помощник</strong> нажмите кнопку <strong>Настроить сетевые интерфейсы</strong> чтобы открыть окно <strong>Новый сетевой интерфейс</strong>. Можно принять стандартные параметры или изменить их при необходимости.</li>
  <li>Введите <strong>Имя</strong> сетевого интерфейса.</li>
  <li>В выпадающем меню выберите <strong>Сеть</strong> и <strong>Тип</strong> сетевого интерфейса для новой ВМ. По умолчанию, если NIC на ВМ определён и подключен к сети, <strong>Состояние канала</strong> указано как <strong>Работает</strong>.
    <div class="alert alert-info">
      <p><strong>Внимание:</strong> параметры полей <strong>Сеть</strong> и <strong>Тип</strong> заполняются сетями, доступными кластеру, и NIC, доступными на ВМ.</p>

    </div>
  </li>
  <li>Если применимо, поставьте галочку <strong>Указать пользовательский MAC адрес</strong> и введите MAC адрес сетевого интерфейса.</li>
  <li>Нажмите на стрелку рядом с <strong>Дополнительными параметрами</strong> для настройки полей <strong>Зеркалирования портов</strong> и <strong>Статус карты</strong>, если необходимо.</li>
  <li>Нажмите <strong>OK</strong> чтобы закрыть окно <strong>Новый сетевой интерфейс</strong> и открыть окно <strong>Новая ВМ — Пошаговый помощник</strong>.</li>
  <li>Нажмите кнопку <strong>Параметры виртуального диска</strong> чтобы открыть окно <strong>Новый виртуальный диск</strong>.</li>
  <li>
    <p>Добавьте для машины либо <strong>Внутренний</strong> виртуальный диск, либо <strong>Внешний</strong> LUN.
⁠</p>

    <p><img alt="Add Virtual Disk Window" title="Окно добавления виртуального диска" src="./OVirt User Guide — oVirt_files/Add_Virtual_Disk.png"></p>

    <p><strong>Рисунок 4.7. Окно добавления виртуального диска</strong></p>
  </li>
  <li>Нажмите <strong>OK</strong> чтобы закрыть окно <strong>Новый виртуальный диск</strong>. Откроется новое окно <strong>Новая ВМ — Пошаговый помощник</strong> с изменённым контекстом. Дальнейшая обязательная настройка отсутствует.</li>
  <li>Нажмите кнопку <strong>Настроить позже</strong> чтобы закрыть окно.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы добавили сетевой интерфейс и виртуальный диск для ВМ.</p>

<h3 id="editing-virtual-machines">Изменение параметров виртуальных машин</h3>

<h4 id="editing-virtual-machine-properties">Изменение параметров виртуальных машин</h4>

<p><strong>Описание задачи</strong></p>

<p>Изменение параметров хранилища, ОС или сетевых параметров может негативно повлиять на виртуальную машину. Перед применением любых изменений проверьте корректность вносимых параметров. Перед внесением изменений виртуальные машины должны быть выключены. Далее объясняется, как изменять парметры виртуальных машин. Для изменения параметров изменяются виртуальные машины.</p>

<p>Следующие поля можно редактировать во время выполнения ВМ:</p>

<ul>
  <li><strong>Имя</strong></li>
  <li><strong>Описание</strong></li>
  <li><strong>Комментарий</strong></li>
  <li><strong>Защита от удаления</strong></li>
  <li><strong>Сетевые интерфейсы</strong></li>
  <li><strong>Использовать Cloud-Init/Sysprep</strong> (и его свойства)</li>
  <li><strong>Использовать пользовательское время простоя при миграции</strong></li>
  <li><strong>С высокой доступностью</strong></li>
  <li><strong>Приоритет очереди запуска/миграции</strong></li>
  <li><strong>Модель модуля наблюдения</strong></li>
  <li><strong>Действие модуля наблюдения</strong></li>
  <li><strong>Гарантированная физическая память</strong></li>
  <li><strong>Включено устройство памяти Balloon</strong></li>
  <li><strong>VirtIO-SCSI включено</strong></li>
  <li><strong>Первое устройство</strong></li>
  <li><strong>Второе устройство</strong></li>
  <li><strong>Присоединить CD</strong></li>
  <li><strong>путь к ядру</strong></li>
  <li><strong>путь к initrd</strong></li>
  <li><strong>параметры ядра</strong></li>
</ul>

<p>Для смены других параметров виртуальную машину необходимо выключить.</p>

<p>⁠</p>

<p><strong>Действие 4.8. Изменение параметров ВМ:</strong></p>

<ol>
  <li>Выберите ВМ для редактирования.</li>
  <li>Нажмите кнопку <strong>Изменить</strong> чтобы открыть окно <strong>Изменить ВМ</strong>.</li>
  <li>Внесите необходимые изменения в поля <strong>Общие</strong>, <strong>Система</strong>, <strong>Начальный запуск</strong>, <strong>Консоль</strong>, <strong>Хост</strong>, <strong>Высокая доступность</strong>, <strong>Распределение ресурсов</strong>, <strong>Параметры загрузки</strong> и <strong>Пользовательские параметры</strong>.</li>
  <li>Нажмите <strong>OK</strong> для сохранения изменений. Изменения будут применены после перезагрузки ВМ.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы сменили параметры ВМ путём её редактирования.</p>

<h4 id="editing-a-network-interface">Изменение параметров сетевого интерфейса</h4>

<p><strong>Описание задачи</strong></p>

<p>Здесь описываются действия по изменению параметров сетевого интерфейса. Чтобы изменить параметры сетевого интерфейса необходимо редактировать сетевой интерфейс.</p>

<p>⁠</p>

<p><strong>Действие 4.9. Редактирование сетевого интерфейса</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите ВМ.</li>
  <li>Перейдите на вкладку <strong>Сетевые интерфейсы</strong> панели сведений и выберите сетевой интерфейс для редактирования.</li>
  <li>Нажмите на кнопку <strong>Изменить</strong> чтобы открыть окно <strong>Изменить сетевой интерфейс</strong>. В этом диалоге присутвуют те же поля для заполнения, что и в диалоге <strong>Новый сетевой интерфейс</strong>.</li>
  <li>Нажмите <strong>OK</strong> чтобы сохранить изменения после окончания редактирования.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы изменили сетевой интерфейс путём его редактирования.</p>

<h4 id="extending-the-size-of-an-online-virtual-disk">Увеличение размера сетевого виртуального диска</h4>

<p><strong>Описание задачи</strong></p>

<p>Здесь описываются действия по увеличению размера виртуального носителя, если носитель присоединён к ВМ.</p>

<p>⁠</p>

<p><strong>Действие 4.10. Увеличение размера сетевого виртуального диска</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите ВМ.</li>
  <li>Перейдите на вкладку <strong>Диски</strong> на панели сведений.</li>
  <li>Выберите целевой диск из списка на панели сведений.</li>
  <li>Нажмите <strong>Изменить</strong> на панели сведений.</li>
  <li>Введите значение в поле <code>Увеличить размер на (ГБ)</code>.</li>
  <li>Нажмите <strong>OK</strong>.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Статус целевого диска на короткое время изменится на <code>заблокирован</code>, в течение этого времени изменяется размер диска. После окончания изменения размера, статус диска изменится на <code>OK</code>.</p>

<h4 id="floating-disks">Плавающие диски</h4>

<p>Плавающие диски — это диски, не привязанные ни к одной из ВМ.</p>

<p>Плавающие диски могут минимизировать объём времени, требуемый на настройку ВМ. Назначение плавающего диска в качестве хранилища для ВМ отменяет необходимость ожидания предварительного выделения диска во время создания ВМ.</p>

<p>Плавающие диски можно присоединять к ВМ или назначить как возможные общие диски, которые могут использоваться с одной или более машин.</p>

<h4 id="associating-a-virtual-disk-with-a-virtual-machine">Назначение виртуального диска виртуальной машине</h4>

<p><strong>Описание задачи</strong></p>

<p>Здесь описываются действия по назначению виртуального диска виртуальной машине. После того, как диск был назначен, ВМ получает к нему доступ.</p>

<p>⁠</p>

<p><strong>Действие 4.11. Назначение виртуального диска виртуальной машине</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите машину.</li>
  <li>На панели сведений перейдите на вкладку <strong>Диски</strong>.</li>
  <li>Нажмите на кнопку <strong>Добавить</strong> в меню в верхней части панели сведений.</li>
  <li>В поле <strong>Размер(ГБ)</strong> укажите размер диска в ГБ.</li>
  <li>Введите псевдоним диска в поле <strong>Псевдоним</strong>.</li>
  <li>Нажмите <strong>OK</strong> в нижнем правом углу окна <strong>Добавить виртуальный диск</strong>. Диск, назначенный виртуальной машине, вскоре появится на панели сведений.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Виртуальный диск был назначен виртуальной машине.</p>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> во время присоединения или отсоединения дисков к/от виртуальной машины не происходит потребление ресурсов квоты.</p>

</div>
<div class="alert alert-info">
  <p><strong>Внимание:</strong> с помощью вышеописанных действий возможно присоединить виртуальный диск более чем к одной машине.</p>

</div>
<p>#### Смена CD виртуальной машины</p>

<p><strong>Описание задачи</strong></p>

<p>Сменить доступный для машины диск CD возможно во время выполнения виртуальной машины.</p>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> возможно использовать только те файлы ISO, которые был добавлены в ISO домен того кластера, членом которого является эта ВМ. Соответственно, загружать файлы образов ISO на этот домен необходимо до того, как эти файлы станут доступны для виртуальных машин.</p>

</div>
<p>⁠</p>

<p><strong>Действие 4.12. Смена CD виртуальной машины</strong></p>

<ol>
  <li>Во вкладке <strong>Витуальные машины</strong> выберите ВМ, выполняемую в данный момент.</li>
  <li>
    <p>Нажмите на кнопку <strong>Сменить CD</strong> чтобы открыть окно <strong>Сменить CD</strong>.
⁠</p>

    <p><img alt="The Change CD Window" title="Окно «Сменить CD»" src="./OVirt User Guide — oVirt_files/Navigation_Tabs_Change_CD.png"></p>

    <p><strong>Рисунок 4.9. Окно «Сменить CD»</strong></p>
  </li>
  <li>В выпадающем меню:
    <ul>
      <li>Выберите пункт <code>[Извлечь]</code> для извлечения CD, в данный момент подключенного к виртуальной машине. Или </li>
      <li>Выберите из списка файл ISO, для извлечения CD, в данный момент подключенного к виртуальной машине, и смонтируйте этот файл образа ISO как CD.</li>
    </ul>
  </li>
  <li>Нажмите <strong>OK</strong>.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы извлекли CD, ранее доступный для виртуальной машины, или извлекли CD ранее доступный для виртуальной машины, и создали новый доступный CD.</p>

<h4 id="smart-card-authentication">Аутентификация с помощью смарт-карты</h4>

<p>Смарт карты — это внешняя аппаратная функция безопасности, наиболее часто встречающаяся в кредитных картах, но также  нередко используемая в бизнесе в виде токенов аутентификации. Смарт-кары можно использовать для защиты виртуальных машин oVirt.</p>

<h4 id="enabling-and-disabling-smart-cards">Включение и выключение смарт-карт</h4>

<p><strong>Описание задачи</strong></p>

<p>Здесь описываются действия по включению и выключению функции смарт-карт в виртуальных машинах.</p>

<p>⁠</p>

<p><strong>Действие 4.13. Включение смарт-карт</strong></p>

<ol>
  <li>Убедитесь, что аппаратное оборудование смарт-карты подключено к клиентской машине и установлено согласно инструкциям производителя.</li>
  <li>Выберите нужную виртуальную машину.</li>
  <li>Нажмите на кнопку <strong>Изменить</strong>. Появится окно <strong>Изменить ВМ</strong>.</li>
  <li>Перейдите на вкладку <strong>Консоль</strong> и отметьте галочкой пункт <strong>Смарт-карта включена</strong>, затем нажмите <strong>OK</strong>.</li>
  <li>Запустите ВМ, нажав на значок <strong>Консоль</strong> или через Пользовательский портал. Аутентификция смарт-карты передана от клиентской аппаратной части к виртуальной машине.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы включили аутентификацию смарт-карты в виртуальной машине.</p>

<div class="alert alert-info">
  <p><strong>Важно:</strong> в случае неправильно установленного аппартного оборудования смарт-карты, включение функции смарт-карт в виртуальной машине может повлиять на корректность загрузки машины.</p>

</div>
<p>⁠</p>

<p><strong>Действие 4.14. Отключение смарт-карт</strong></p>

<ol>
  <li>Выберите нужную ВМ.</li>
  <li>Нажмите на кнопку <strong>Изменить</strong>. Появится окно <strong>Изменить ВМ</strong>.</li>
  <li>Перейдите на вкладку <strong>Консоль</strong> и уберите галочку с пункта <strong>Смарт-карта включена</strong>, затем нажмите <strong>OK</strong>.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы отключили аутентификацию смарт-карты в виртуальной машине.</p>

<h3 id="removing-virtual-machines">Удаление виртуальных машин</h3>

<h4 id="removing-a-virtual-machine">Удаление виртуальной машины</h4>

<p><strong>Описание задачи</strong></p>

<p>Удалить виртуальную машину из среды oVirt.</p>

<div class="alert alert-info">
  <p><strong>Важно:</strong> во время выполнения ВМ, кнопка <strong>Удалить</strong> неактивна; перед тем, как получить возможность удалить виртуальную машину, машину необходимо выключить.</p>

</div>
<p>⁠</p>

<p><strong>Действие 4.15. Удаление виртуальной машины</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите ВМ для удаления.</li>
  <li>Нажмите <strong>Удалить</strong> чтобы открыть окно <strong>Удалить ВМ</strong>.</li>
  <li>При необходимости также отметьте галочкой пункт <strong>Удалить диск(и)</strong> чтобы вместе с машиной удалить также и подключённые к ней виртуальные диски. Если пункт <strong>Удалить диск(и)</strong> не отмечен, виртуальные диски останутся в среде в качестве плавающих дисков.</li>
  <li>Нажмите <strong>OK</strong>.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Виртуальная машина была удалена из среды и отсутствует в списке машин в ресурсной вкладке <strong>Виртуальные машины</strong>. При отмеченном пункте <strong>Удалить диск(и)</strong> также удаляются и виртуальные диски, подключенные к ВМ.</p>

<h3 id="snapshots">Снимки</h3>

<h4 id="managing-snapshots">Управление снимками</h4>

<p>Перед внесением изменений в параметры виртуальной машины рекомендуется сделать резервную копию всех существующих данных этой машины. Снимок показывает представление ОС виртуальной машины в указанный момент времени, и его можно использовать для восстановление ВМ до предыдущего состояния.</p>

<div class="alert alert-info">
  <p><strong>Важно:</strong> динамические снимки можно создавать только в тех дата-центрах, где работает oVirt версии 3.1 или более поздней. В иных случаях ВМ должна быть предварительно выключена.</p>

</div>
<p>#### Создание снимков</p>

<p><strong>Описание задачи</strong></p>

<p>Здесь описываются действия по созданию снимка виртуальной машины.</p>

<p>⁠</p>

<p><strong>Действие 4.16. Создание снимка ВМ</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите ВМ.</li>
  <li>Перейдите на вкладку <strong>Снимки</strong> на панели сведений.</li>
  <li>Нажмите <strong>Создать</strong>. Будет показан диалог <strong>Создать снимок</strong>.</li>
  <li>Ввдите описание снимка, с помощью галочек отметьте нужные пункты <strong>Включая диски</strong> и нажмите <strong>OK</strong>.</li>
  <li>Создаётся новый снимок ОС виртуальной машины и её приложений. Он появляется в списке с левой стороны во вкладке <strong>Снимки</strong>.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы создали снимок ВМ.</p>

<h4 id="cloning-snapshots">Клонирование снимков</h4>

<p><strong>Описание задачи</strong></p>

<p>Здесь описываются действия по клонированию ВМ из снимка.</p>

<p>⁠</p>

<p><strong>Действие 4.17. Клонирование снимков</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите ВМ.</li>
  <li>Перейдите на вкладку <strong>Снимки</strong> на панели сведений.</li>
  <li>Из списка на панели сведений выберите снимок, на базе которого нужно создать клон ВМ.</li>
  <li>Нажмите кнопку <strong>Клонировать</strong> в верхней части панели сведений. Появится окно <strong>Клонировать ВМ из снимка</strong>. Это окно аналогично окну <strong>Новая ВМ</strong>.</li>
  <li>Заполните параметры и нажмите <strong>OK</strong> в нижнем правом углу окна <strong>Клонировать ВМ из снимка</strong>.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы клонировали ВМ из снимка.</p>

<h4 id="using-a-snapshot-to-restore-a-virtual-machine">Использование снимка для восстановления виртуальной машины</h4>

<p><strong>Описание задачи</strong></p>

<p>Снимок используется для восстановления ВМ до предыдущего состояния.</p>

<p>⁠</p>

<p><strong>Действие 4.18. Использование снимка для восстановления ВМ</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите ВМ.</li>
  <li>Перейдите на вкладку <strong>Снимки</strong> на панели сведений чтобы увидеть список доступных снимков.</li>
  <li>На левой панели выберите снимок для восстановления. Сведения об этом снимке будут доступны на правой панели.</li>
  <li>Нажмите на выпадающий список рядом с кнопкой <strong>Предварительный просмотр</strong> чтобы открыть окно <strong>Пользовательский просмотр снимка</strong>.</li>
  <li>Отметьте галочками <strong>Параметры ВМ</strong>, <strong>Память</strong> и диски, которые нужно восстановить, затем нажмите <strong>OK</strong>. Это позволит создать и восстановиться из пользовательского снимка, используя конфигурацию и диск(и) нескольких снимков. Статус этого снимка изменится на <code>Режим просмотра</code>. В течение некоторого времени ВМ будет иметь статус <code>Образ заблокирован</code>, далее машина снова получит статус <code>Выключена</code>.</li>
  <li>Запустите ВМ; она будет использовать образ диска снимка.</li>
  <li>Нажмите <strong>Зафиксировать</strong> чтобы закрепить восстановление ВМ до состояния снимка. Любые последующие снимки стираются. Или нажмите на кнопку <strong>Отменить</strong> чтобы деактивировать снимок и вернуть ВМ в предыдущее состояние.</li>
</ol>

<p><strong>Итог</strong></p>

<p>ВМ восстанавливается до тех параметров, которые она имела в тот момент, когда был сделан снимок, или же возвращается до своего состояния перед просмотром снимка.</p>

<h4 id="deleting-snapshots">Удаление снимков</h4>

<p><strong>Описание задачи</strong></p>

<p>Здесь описываются действия по удалению снимков.</p>

<p>⁠</p>

<p><strong>Действие 4.19. Удаление снимков</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите ВМ.</li>
  <li>Перейдите на вкладку <strong>Снимки</strong> на панели сведений чтобы увидеть список доступных снимков.</li>
  <li>Выберите снимок для удаления, затем нажмите <strong>Удалить</strong>. Будет выведен диалог с просьбой подтвердить удаление. Нажмите <strong>OK</strong> для удаления.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы удалили снимок.</p>

<div class="alert alert-info">
  <p><strong>Важно:</strong> Удаление снимка не удаляет никакой информации из виртуальной машины, удаляется только точка возврата. Тем не менее, во время восстановления ВМ из снимка, удаляется любая информация, которая была записана в машину после того момента, когда был сделан снимок.</p>

</div>
<p>### Шаблоны</p>

<h4 id="introduction-to-templates">Введение в шаблоны</h4>

<p>Шаблон — это копия предварительно настроенной виртуальной машины, используемая для упрощения дальнейшего создания аналогичных машин. В шаблонах сохраняется информация об установленном ПО и его параметрах, а также об аппаратных параметрах оригинальной ВМ.</p>

<p>При создании шаблона берётся копия диска машины, доступная только для чтения. Этот диск, доступный только для чтения, становится базовым образом диска нового шаблона и любой ВМ, созданной из этого шаблона. Таким образом, шаблон невозможно удалить, пока в окружении oVirt существуют ВМ, созданные на базе этого шаблона.</p>

<p>ВМ, созданые на базе шаблона, используют тот же тип и драйвер NIC, что и оригинальная машина, но имеют отдельные уникальные MAC адреса.</p>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> возможно, перед использованием ВМ для создания шаблона, эту машину придётся запечатать.</p>

</div>
<p>#### Работа с шаблонами</p>

<h5 id="creating-a-template">Создание шаблона</h5>

<p><strong>Описание задачи</strong></p>

<p>Создать шаблон из существующей ВМ для использования его в качестве основы при создании дополнительных ВМ.</p>

<p>⁠</p>

<p><strong>Действие 4.20. Создание шаблона из существующей ВМ</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите ВМ.</li>
  <li>Убедитесь, что машина выключена и имеет статус <code>Выключена</code>.</li>
  <li>Нажмите на кнопку <strong>Создать шаблон</strong> чтобы открыть окно <strong>Новый шаблон</strong>.
<img alt="The New Template window" title="Окно нового шаблона" src="./OVirt User Guide — oVirt_files/New_template.png">
<strong>Рисунок 4.10. Окно «Новый шаблон»</strong></li>
  <li>Введите <strong>Имя</strong>, <strong>Описание</strong> и <strong>Комментарий</strong> для шаблона.</li>
  <li>В выпадающем меню <strong>Кластер</strong> выберите кластер, с которым будет связан шаблон. По умолчанию используется кластер исходной ВМ.</li>
  <li>При необходимости, отметьте галочкой пункт <strong>Создать как версию подшаблона</strong>, выберите <strong>Корневой шаблон</strong> и введите <strong>Название подверсии</strong> для создания нового шаблона как подшаблона уже существующего.</li>
  <li>В разделе <strong>Распределение дисков</strong> в текстовом поле <strong>Псевдоним</strong> введите псевдоним диска, а в выпадающем меню <strong>Таргет</strong> выберите домен хранилища, где будет располагаться диск. По умолчанию, все эти значения совпадают с соответствующими значениями исходной ВМ.</li>
  <li>Пункт <strong>Разрешить всем пользователям доступ к этому шаблону</strong> отмечен по умолчанию. Это делает шаблон общедоступным.</li>
  <li>Пункт <strong>Копировать права доступа ВМ</strong> по умолчанию не отмечен. Отметьте галочкой этот пункт, если необходимо скопировать права доступа исходной ВМ на шаблон.</li>
  <li>Нажмите <strong>OK</strong>.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Во время создания шаблона ВМ имеет статус <code>Образ заблокирован</code>. В зависимости от размера диска ВМ и аппаратных параметров хранилища, процесс создания шаблона может занять до часа времени. После создания, шаблон добавляется во вкладку <strong>Шаблоны</strong>. Теперь на базе этого шаблона можно создавать новые ВМ.</p>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> при создании шаблона, виртуальная машина копируется, чтобы после создания шаблона можно было использовать как существующую ВМ, так и её шаблон.</p>

</div>
<p>##### Изменение шаблона</p>

<p><strong>Описание задачи</strong></p>

<p>Как только шаблон был создан, можно изменять его свойства. Поскольку шаблон является копией ВМ, возможности, доступные при изменении шаблона, аналогичны возможностям, доступным в окне <strong>Изменить ВМ</strong>.</p>

<p>⁠</p>

<p><strong>Действие 4.21. Изменение шаблона</strong></p>

<ol>
  <li>Для поиска и выбора нужного шаблона, используйте ресурсную вкладку <strong>Шаблоны</strong>, древовидный режим или поисковый функционал.</li>
  <li>Нажмите <strong>Изменить</strong> чтобы открыть окно <strong>Изменить шаблон</strong>.</li>
  <li>Внесите необходимые изменения в параметры и нажмите <strong>OK</strong>.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Своства шаблона обновляются. Окно <strong>Изменить шаблон</strong> невозможно закрыть, если поле свойства недействительно.</p>

<h5 id="deleting-a-template">Удаление шаблона</h5>

<p><strong>Описание задачи</strong></p>

<p>Удалить шаблон из окружения oVirt.</p>

<p><strong>Внимание</strong></p>

<p>Если шаблон использовался для создания ВМ, убедитесь, что вы не удаляете этот шаблон, так как он необходим для продолжения работы ВМ.</p>

<p>⁠</p>

<p><strong>Действие 4.22. Удаление шаблона</strong></p>

<ol>
  <li>Для поиска и выбора нужного шаблона, используйте ресурсную вкладку, древовидный режим или поисковый функционал.</li>
  <li>Нажмите <strong>Удалить</strong> чтобы открыть окно <strong>Удалить шаблон(ы)</strong>.</li>
  <li>Нажмите <strong>OK</strong> чтобы удалить шаблон.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы удалили шаблон.</p>

<h4 id="templates-and-permissions">Шаблоны и права доступа</h4>

<h5 id="managing-system-permissions-for-a-template">Управление системными пономочиями шаблона</h5>

<p>Являясь <strong>привилегированным пользователем</strong>, системный администратор управляет всеми аспектами Административного портала. Более конкретные административные роли можно назначить другим пользователям. Эти ограниченные административные роли полезны для назначения пользователю административных привилегий, ограниченных конкретным ресурсом. Например, у роли <strong>Администратор дата-центра</strong> имеются привилегии администратора, распространяющиеся только на назначенный дата-центр, исключая хранилище этого дата-центра, а у роли <strong>Администратор кластера</strong> есть привилегии администратора, распространаяющиеся только на назначенный кластер.</p>

<p>Администратор шаблонов — это системная административная роль, распространяющаяся на шаблоны в дата-центре. Эту роль можно назначить конкретным виртуальным машинам, дата-центру или даже целой среде виртуализации; она используется, если нужно разрешить различным пользователями управлять конкретными виртуальными ресурсами.</p>

<p>Роль администратора шаблона даёт право на выполнение следующих действий:</p>

<ul>
  <li>Создание, изменение, экспорт и удаление связанных шаблонов.</li>
  <li>Импорт и экспорт шаблонов.</li>
</ul>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> присваивать роли и привилегии можно только существующим пользователям.</p>

</div>
<p>### Ресурсы</p>

<h4 id="monitoring-power-user-portal-resources">Мониторинг ресурсов Пользовательского портала</h4>

<p>Перед внесением конфигурационных изменений в виртуальные машины Пользовательского портала рекомендуется провести инвентаризацию доступных ресурсов. Это также необходимо для проверки достаточности имеющихся ресурсов для пиковой производительности и для избежания перегрузки хостов, на которых выполняются ВМ.</p>

<p>Во вкладке <strong>Ресурсы</strong> на панели навигации показаны сводные сведения для всех ресурсов, доступных на Пользовательском портале, а также производительность и статистика каждой виртуальной машины.</p>

<p><img alt="Resources tab" title="Вкладка ресурсов" src="./OVirt User Guide — oVirt_files/Resource_Tab.png"></p>

<p><strong>Рисунок 4.11. Вкладка «Ресурсы»</strong></p>

<ul>
  <li><strong>Виртуальные ЦП</strong>: в этом поле показывается число используемых виртуальных ЦП машины, а также потребление квоты ЦП всеми пользователями, включая вас.</li>
  <li><strong>Память</strong>: в этом поле показывается потребление квоты памяти всеми пользователями, включая вас, а также определённая квотой доступная память.</li>
  <li><strong>Хранилище</strong>: в этом поле показывается потребление квоты хранилища всеми пользователями, включая вас, общий размер всех виртуальных дисков, а также число и общий размер снимков виртуальных машин. Кроме того, присутствует раздел, показывающий подробности о хранилище каждой ВМ. Нажмите кнопку <strong>+</strong> рядом с именем ВМ чтобы просмотреть все виртуальные диски, присоединённые к ВМ.</li>
</ul>

<h4 id="quota---a-users-introduction">Инструмент Quota: введение для пользователя</h4>

<p>Созданные виртуальные машины потребляют ресурсы ЦП и хранилища из дата-центра. Quota сопоставляет объём виртуальных ресурсов, потребляемых созданием машины, с резервами хранилища и лимитами времени выполнения, установленными системным администратором.</p>

<p>Если в распоряжении пользователя недостаточно одного из вышеуказанных резервов, пользователь не сможет создать ВМ. Избегайте превышения лимита квоты с помощью мониторинга информации о потреблении ресурсов ЦП и хранилища, доступной во вкладке Ресурсы.</p>

<h4 id="what-to-do-when-you-exceed-your-quota">Что делать, если квота пользователя превышена</h4>

<p>oVirt предоставляет интструмент ограничения ресурсов под названием <em>quota</em>. С его помощью системные администраторы могут ограничить объём ресурсов ЦП и хранилища, выделяенмых каждому пользователю. Quota сопоставляет объём виртуальных ресурсов, потребляемых во время работы виртуальной машины, с резервами хранилища и лимитами времени выполнения, установленными системным администратором.</p>

<p>В момент превышения квоты появляется всплывающее окно с уведомлением о превышении квоты пользователем и об отключении доступа к виртуальным ресурсам. Это может произойти, например, если в окружении пользователя имеется слишком много одновременно выполняющихся виртуальных машин.</p>

<p>Чтобы возобновить доступ к виртуальным машинам, выполните одно из следующих действий:</p>

<ul>
  <li>Выключите ненужные в данную минуту виртуальные машины. Это сократит объём потребления ресурсов до уровня, не превышающего квоту, и тогда машины можно будет снова включить.</li>
  <li>Если выключить машины невозможно, обратитесь к системному администратору для увеличения лимита квоты или для удаления неиспользуемых ВМ.</li>
</ul>

<h3 id="virtual-machines-and-permissions">Виртуальные машины и права доступа</h3>

<h4 id="managing-system-permissions-for-a-virtual-machine">Управление системными привилегиями виртуальных машин</h4>

<p>Являясь <strong>привилегированным пользователем</strong>, системный администратор управляет всеми аспектами Административного портала. Более конкретные административные роли можно назначить другим пользователям. Эти ограниченные административные роли полезны для назначения пользователю административных привилегий, ограниченных конкретным ресурсом. Например, у роли <strong>Администратор дата-центра</strong> имеются привилегии администратора, распространяющиеся только на назначенный дата-центр, исключая хранилище этого дата-центра, а у роли <strong>Администратор кластера</strong> есть привилегии администратора, распространаяющиеся только на назначенный кластер.</p>

<p>Роль <strong>UserVmManager</strong> — это роль системного адмистрирования виртуальных машин в дата-центре. Эту роль можно назначить конкретным виртуальным машинам, дата-центру или даже целой среде виртуализации; она используется, если нужно разрешить различным пользователями управлять конкретными виртуальными ресурсами.</p>

<p>Роль пользователя-администратора виртуальных машин даёт право на выполнение следующих действий:</p>

<ul>
  <li>Создавать, изменять и удалять виртуальные машины.</li>
  <li>Запускать, замораживать и останавливать виртуальные машины.</li>
</ul>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> присваивать роли и привилегии можно только существующим пользователям.</p>

</div>
<p>Многие конечные пользователи заботятся только о ресурсах виртуализованного окружения для виртуальных машин. Поэтому oVirt предлагает несколько пользовательских ролей, дающих возможность управлять только конкретными ВМ и никакими другими ресурсами дата-центра.</p>

<h4 id="assigning-virtual-machines-to-users">Привязка ВМ к пользователям</h4>

<p>При создании виртуальных машин для других пользователей, необходимо присвоить роли пользователям до начала их работы с этими ВМ. Не забудьте, что привилегии можн присваивать только существующим пользователям. Подробности создания учётных записей пользователей см. в <em>Руководстве по установке oVirt</em>.</p>

<p>По умолчанию, Пользовательский портал oVirt поддерживает три роли: пользовтаель, PowerUser и UserVmManager. Изменённые индвидуальные роли можно настроить через Портал администрирования oVirt. Роли по умолчанию описываются ниже.</p>

<ul>
  <li><strong>Пользователь</strong> может подключаться к ВМ и работать с ВМ. Эта роль подходит для конечных пользователей рабочих столов, выполняющих ежедневные задачи.</li>
  <li><strong>PowerUser</strong> может создавать ВМ и просматривать виртуальные ресурсы. Эта роль подходит администратору или менеджеру, который должен предоставлять виртуальные ресурсы работникам.</li>
  <li><strong>UserVmManager</strong> может изменять и удалять ВМ, присваивать полномочия пользователям, работать со снимками и шаблонами. Эта роль подходит для тех, кому необходимо вносить изменения в параметры виртуального окружения.</li>
</ul>

<p>При создании виртуальной машины, пользователь автоматически наследует привилегии <strong>UserVmManager</strong>. Это даёт возможность вносить изменения в параметры ВМ и присваивать привилегии управляемым пользователям, а также пользователям в вашей группе Identity Management (IdM) или RHDS (Red Hat Directory Server).</p>

<p>Подробности о поддержке служб каталога в oVirt см. в <em>Руководстве по установке oVirt</em>.</p>

<p><strong>Описание задачи</strong></p>

<p>Здесь описываются действия по добавлению привилегий пользователям.</p>

<p>⁠</p>

<p><strong>Действие 4.23. Присвоение привилегий пользователям</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите ВМ.</li>
  <li>На панели сведений выберите вкладку <strong>Права доступа</strong>.</li>
  <li>Нажмите <strong>Добавить</strong>. Будет показан диалог <strong>Добавить права пользователю</strong>. Введите имя, имя пользователя или их составную часть в текстовое поле <strong>Поиск</strong> и нажмите <strong>Искать</strong>. В списке результатов поиска будут показаны совпадения.</li>
  <li>Отметьте галочкой пользователя, которому будут присвоены привилегии. Прокрутите список <strong>Присвоить роль</strong> и выберите <strong>Роль пользователя</strong>. Нажмите <strong>OK</strong>.</li>
  <li>Имя пользователя и его роль появятся в списке пользователей, которым разрешён доступ к этой ВМ.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы добавили привилегии пользователю.</p>

<div class="alert alert-info">
  <p><strong>Внимание:</strong> если пользователь имеет права только на одну виртуальную машину, для этой машины можно настроить метод единого входа (Single Sign On, SSO). Метод единого входа даёт возможность пользователю авторизоваться напрямую в виртуальной машине, минуя Пользовательский портал. Метод единого входа можно включить/отключить через Пользовательский портал для каждой виртуальной машины отдельно.</p>

</div>
<p>#### Запрещение доступа пользователей к виртуальным машинам</p>

<p><strong>Описание задачи</strong></p>

<p>Здесь описываются действия по запрещению доступа пользователей к виртуальным машинам.</p>

<p>⁠</p>

<p><strong>Действие 4.24. Запрещение доступа пользователей к виртуальным машинам</strong></p>

<ol>
  <li>Перейдите на вкладку <strong>Виртуальные машины</strong> и выберите ВМ.</li>
  <li>На панели сведений выберите вкладку <strong>Права доступа</strong>.</li>
  <li>Нажмите <strong>Удалить</strong>. Появится сообщение с просьбой подтвердить удаление выбранных привилегий.</li>
  <li>Чтобы продолжить, нажмите <strong>OK</strong>. Для отмены нажмите <strong>Отмена</strong>.</li>
</ol>

<p><strong>Итог</strong></p>

<p>Мы удалили привилегии пользователя.</p>

<h2 id="configuring-console-options">Настройка параметров консоли</h2>

<h3 id="console-options">Параметры консоли</h3>

<h4 id="introduction-to-connection-protocols">Введение в протоколы связи</h4>

<p>Протоколы связи — это технологии, лежащие в основе принципа графических консолей для виртуальных машин, и позволяющие пользователям работать с виртуальными машинами точно также, как и с физическими. В настоящее время oVirt поддерживает следующие протоколы связи:</p>

<p><strong>SPICE</strong></p>

<p>Простой протокол для независимой вычислительной среды (Simple Protocol for Independent Computing Environments, SPICE) — это рекомендуемый протокол связи как для машин под управлением ОС Linux, так и для машин под управлением ОС Windows. SPICE устанавливается и работает на клиенте, который подключается к ВМ.</p>

<p><strong>VNC</strong></p>

<p>С помощью системы Virtual Network Computing (VNC) можно создавать консоли удалённого доступа как к машинам под управлением ОС Linux, так и к машинам под управлением ОС Windows. Чтобы создать консоль для подключения к ВМ с помощью VNC, нужно использовать удалённый просмотрщик или клиент VNC.</p>

<p><strong>RDP</strong></p>

<p>Протокол удалённого рабочего стола (Remote Desktop Protocol, RDP) можно использовать только для создания консолей для подключения к ВМ под управлением ОС Windows, и только для доступа с машины под управлением СО Windows, на которой установлен Удалённый рабочий стол. Кроме того, перед подключением к виртуальной машине Windows с помощью RDP, на ВМ необходимо настроить удалённое совместное пользование yи настроить брандмауэр для разрешения уудалённых подключений к рабочему столу.</p>

<div class="alert alert-info">
  <p><strong>Note:</strong> SPICE is not currently supported on virtual machines running Windows 8. If a Windows 8 virtual machine is configured to use the SPICE protocol, it will detect the absence of the required SPICE drivers and automatically fall back to using RDP.</p>

</div>
<p>#### Accessing Console Options</p>

<p>In the User Portal, you can configure several options for opening graphical consoles for virtual machines, such as the method of invocation and whether to enable or disable USB redirection.</p>

<p><strong>Procedure 5.1. Accessing Console Options</strong></p>

<ol>
  <li>Select a running virtual machine.</li>
  <li>Click the edit console options button to open the <strong>Console Options</strong> window.</li>
</ol>

<div class="alert alert-info">
  <p><strong>Note:</strong> Further options specific to each of the connection protocols, such as the keyboard layout when using the VNC connection protocol, can be configured in the <strong>Console</strong> tab of the <strong>Edit Virtual Machine</strong> window.</p>

</div>
<p>#### SPICE Console Options</p>

<p>When the SPICE connection protocol is selected, the following options are available in the <strong>Console Options</strong> window.</p>

<p><img alt="The Console Options window" title="The Console Options window" src="./OVirt User Guide — oVirt_files/Console_Options.png"></p>

<p><strong>Figure 5.1. The Console Options window</strong></p>

<p><strong>Console Invocation</strong></p>

<ul>
  <li><strong>Auto</strong>: oVirt automatically selects the method for invoking the console.</li>
  <li><strong>Native client</strong>: When you connect to the console of the virtual machine, a file download dialog provides you with a file that opens a console to the virtual machine via Remote Viewer.</li>
  <li><strong>Browser plugin</strong>: When you connect to the console of the virtual machine, you are connected directly via Remote Viewer.</li>
  <li><strong>SPICE HTML5 browser client (Tech preview)</strong>: When you connect to the console of the virtual machine, a browser tab is opened that acts as the console.</li>
</ul>

<p><strong>SPICE Options</strong></p>

<ul>
  <li><strong>Map control-alt-delete shortcut to ctrl+alt+end</strong>: Select this check box to map the <strong>Ctrl</strong>+<strong>Alt</strong>+<strong>Del</strong> key combination to <strong>Ctrl</strong>+<strong>Alt</strong>+<strong>End</strong> inside the virtual machine.</li>
  <li><strong>Enable USB Auto-Share</strong>: Select this check box to automatically redirect USB devices to the virtual machine. If this option is not selected, USB devices will connect to the client machine instead of the guest virtual machine. To use the USB device on the guest machine, manually enable it in the SPICE client menu.</li>
  <li><strong>Open in Full Screen</strong>: Select this check box for the virtual machine console to automatically open in full screen when you connect to the virtual machine. Press <strong>SHIFT</strong>+<strong>F11</strong> to toggle full screen mode on or off.</li>
  <li><strong>Enable SPICE Proxy</strong>: Select this check box to enable the SPICE proxy.</li>
  <li><strong>Enable WAN options</strong>: Select this check box to enable WAN color depth and effects for the virtual machine console. Select this check box for only Windows virtual machines. Selecting this check box sets the parameters <em>WAN-DisableEffects</em> and <em>WAN-ColorDepth</em>. Selecting <strong>Enable WAN options</strong> sets <em>Wan-DisableEffects</em> to <em>animation</em> and sets the color depth to 16 bits.</li>
</ul>

<div class="alert alert-info">
  <p><strong>Important:</strong> The <strong>Browser plugin</strong> console option is only available when accessing the Administration and User Portals through Internet Explorer. This console options uses the version of Remote Viewer provided by the <code>SpiceX.cab</code> installation program. For all other browsers, the <strong>Native client</strong> console option is the default. This console option uses the version of Remote Viewer provided by the <code>virt-viewer-x86.msi</code> and <code>virt-viewer-x64.msi</code> installation files.</p>

</div>
<p>#### VNC Console Options</p>

<p>When the VNC connection protocol is selected, the following options are available in the <strong>Console Options</strong> window.</p>

<p><strong>Console Invocation</strong></p>

<ul>
  <li><strong>Native Client</strong>: When you connect to the console of the virtual machine, a file download dialog provides you with a file that opens a console to the virtual machine via Remote Viewer.</li>
  <li><strong>NoVNC</strong>: When you connect to the console of the virtual machine, a browser tab is opened that acts as the console.</li>
</ul>

<p><strong>VNC Options</strong></p>

<ul>
  <li><strong>Map control-alt-delete shortcut to ctrl+alt+end</strong>: Select this check box to map the <strong>Ctrl</strong>+<strong>Alt</strong>+<strong>Del</strong> key combination to <strong>Ctrl</strong>+<strong>Alt</strong>+<strong>End</strong> inside the virtual machine.</li>
</ul>

<h4 id="rdp-console-options">RDP Console Options</h4>

<p>When the RDP connection protocol is selected, the following options are available in the <strong>Console Options</strong> window.</p>

<p><strong>Console Invocation</strong></p>

<ul>
  <li><strong>Auto</strong>: The Manager automatically selects the method for invoking the console.</li>
  <li><strong>Native client</strong>: When you connect to the console of the virtual machine, a file download dialog provides you with a file that opens a console to the virtual machine via Remote Desktop.</li>
</ul>

<p><strong>RDP Options</strong></p>

<ul>
  <li><strong>Use Local Drives</strong>: Select this check box to make the drives on the client machine to be accessible on the guest virtual machine.</li>
</ul>

<h3 id="remote-viewer-options">Remote Viewer Options</h3>

<h4 id="remote-viewer-options-1">Remote Viewer Options</h4>

<p>When you specify the <strong>Native client</strong> or <strong>Browser plugin</strong> console invocation options, you will connect to virtual machines using Remote Viewer. The Remote Viewer window provides a number of options for interacting with the virtual machine to which it is connected.⁠</p>

<p><strong>Table 5.1. Remote Viewer Options</strong></p>

<table>
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead>
<tr class="header">
<th align="left"><p>Option</p></th>
<th align="left"><p>Hotkey</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>File</p></td>
<td align="left"><ul>
<li><strong>Screenshot</strong>: Takes a screen capture of the active window and saves it in a location of your specification.</li>
<li><strong>USB device selection</strong>: If USB redirection has been enabled on your virtual machine, the USB device plugged into your client machine can be accessed from this menu.</li>
<li><strong>Quit</strong>: Closes the console. The hot key for this option is <strong>Shift</strong>+<strong>Ctrl</strong>+<strong>Q</strong>.</li>
</ul></td>
</tr>
<tr class="even">
<td align="left"><p>View</p></td>
<td align="left"><ul>
<li><strong>Full screen</strong>: Toggles full screen mode on or off. When enabled, full screen mode expands the virtual machine to fill the entire screen. When disabled, the virtual machine is displayed as a window. The hot key for enabling or disabling full screen is <strong>SHIFT</strong>+<strong>F11</strong>.</li>
<li><strong>Zoom</strong>: Zooms in and out of the console window. <strong>Ctrl</strong>+<strong>+</strong> zooms in, <strong>Ctrl</strong>+<strong>-</strong> zooms out, and <strong>Ctrl</strong>+<strong>0</strong> returns the screen to its original size.</li>
<li><strong>Automatically resize</strong>: Tick to enable the guest resolution to automatically scale according to the size of the console window.</li>
<li><strong>Displays</strong>: Allows users to enable and disable displays for the guest virtual machine.</li>
</ul></td>
</tr>
<tr class="odd">
<td align="left"><p>Send key</p></td>
<td align="left"><ul>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>Del</strong>: On a Red Hat Enterprise Linux virtual machine, it displays a dialog with options to suspend, shut down or restart the virtual machine. On a Windows virtual machine, it displays the task manager or Windows Security dialog.</li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>Backspace</strong>: On a Red Hat Enterprise Linux virtual machine, it restarts the X sever. On a Windows virtual machine, it does nothing.</li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F1</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F2</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F3</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F4</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F5</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F6</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F7</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F8</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F9</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F10</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F11</strong></li>
<li><strong>Ctrl</strong>+<strong>Alt</strong>+<strong>F12</strong></li>
<li><strong>Printscreen</strong>: Passes the <strong>Printscreen</strong> keyboard option to the virtual machine.</li>
</ul></td>
</tr>
<tr class="even">
<td align="left"><p>Help</p></td>
<td align="left"><p>The <strong>About</strong> entry displays the version details of Virtual Machine Viewer that you are using.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>Release Cursor from Virtual Machine</p></td>
<td align="left"><p><strong>SHIFT</strong>+<strong>F12</strong></p></td>
</tr>
</tbody>
</table>

<h4 id="remote-viewer-hotkeys">Remote Viewer Hotkeys</h4>

<p>You can access the hotkeys for a virtual machine in both full screen mode and windowed mode. If you are using full screen mode, you can display the menu containing the button for hotkeys by moving the mouse pointer to the middle of the top of the screen. If you are using windowed mode, you can access the hotkeys via the <strong>Send key</strong> menu on the virtual machine window title bar.</p>

<div class="alert alert-info">
  <p><strong>Note:</strong> If <strong>vdagent</strong> is not running on the client machine, the mouse can become captured in a virtual machine window if it is used inside a virtual machine and the virtual machine is not in full screen. To unlock the mouse, press <strong>Shift</strong>+<strong>F12</strong>.</p>

</div>
<p>## ⁠Configuring USB Devices</p>

<h3 id="using-usb-devices-on-virtual-machines---introduction">Using USB Devices on Virtual Machines - Introduction</h3>

<p>A virtual machine connected with the SPICE protocol can be configured to connect directly to USB devices.</p>

<p>The USB device will only be redirected if the virtual machine is active and in focus. USB redirection can be manually enabled each time a device is plugged in or set to automatically redirect to active virtual machines in the SPICE client menu.</p>

<div class="alert alert-info">
  <p><strong>Important:</strong> Note the distinction between the client machine and guest machine. The client is the hardware from which you access a guest. The guest is the virtual desktop or virtual server which is accessed through the User Portal.</p>

</div>
<p>### Using USB Devices on Virtual Machines - Native Mode</p>

<p>USB redirection Native mode allows KVM/SPICE USB redirection for Linux and Windows virtual machines. Virtual (guest) machines require no guest-installed agents or drivers for native USB. All packages required by the client are brought forward by the SPICE xpi Firefox plugin. The USBClerk package must be installed on the Windows client. Native USB mode is supported on the following clients and guests:</p>

<ul>
  <li>Client
    <ul>
      <li>Red Hat Enterprise Linux 6.0 and higher</li>
      <li>Red Hat Enterprise Linux 5.5 and higher</li>
      <li>Windows XP</li>
      <li>Windows 7</li>
      <li>Windows 2008</li>
      <li>Windows 2008 Server R2</li>
    </ul>
  </li>
  <li>Guest
    <ul>
      <li>Red Hat Enterprise Linux 6.0 and higher</li>
      <li>Red Hat Enterprise Linux 5.5 and higher</li>
      <li>Windows XP</li>
      <li>Windows 7</li>
      <li>Windows 2008</li>
    </ul>
  </li>
</ul>

<div class="alert alert-info">
  <p><strong>Note:</strong> If you have a 64-bit architecture PC, you must use the 64-bit version of Internet Explorer to install the 64-bit version of the USB driver. The USB redirection will not work if you install the 32-bit version on a 64-bit architecture. As long as you initially install the correct USB type, you then can access USB redirection from both 32 and 64-bit browsers.</p>

</div>
<p>### Using USB Devices on a Windows Client</p>

<p>The <strong>usbclerk</strong> service must be running on the Windows client for the USB device to be redirected to the guest. Ensure the version of <strong>usbclerk</strong> matches the architecture of the client machine. For example, the 64-bit version of <strong>usbclerk</strong> must be installed on 64-bit Windows machines.</p>

<p><strong>Procedure 7.1. Using USB Devices on a Windows Client</strong></p>

<ol>
  <li>When the <strong>usbclerk</strong> service is installed and running, select a virtual machine that has been configured to use the SPICE protocol.</li>
  <li>Ensure USB support is set to <strong>Native</strong>:</li>
</ol>

<!-- -->

<ol>
  <li>Click the <strong>Edit</strong> button to open the <strong>Edit Virtual Machine</strong> window.</li>
  <li>Click the <strong>Console</strong> tab.</li>
  <li>From the <strong>USB Support</strong> drop-down menu, select <strong>Native</strong>.</li>
  <li>Click <strong>OK</strong>.</li>
</ol>

<li>
  <p>Right-click the virtual machine and click <strong>Edit Console Options</strong> to open the <strong>Console Options</strong>' window, and select the <strong>Enable USB Auto-Share</strong> check box.</p>

</li>
<li>
  <p>Start the virtual machine and click the <strong>Console</strong> button to connect to that virtual machine. When you plug your USB device into the client machine, it will automatically be redirected to appear on your guest machine.</p>

</li>
<p>&lt;/ol&gt;
### Using USB Devices on a Red Hat Enterprise Linux or CentOS Client</p>

<p>The usbredir package enables USB redirection from Red Hat Enterprise Linux, CentOS, or similar clients to virtual machines. usbredir is a dependency of the spice-xpi package, and is automatically installed together with that package.</p>

<p><strong>Procedure 7.2. Using USB devices on a Red Hat Enterprise Linux/CentOSclient</strong></p>

<ol>
  <li>Click the <strong>Virtual Machines</strong> tab and select a virtual machine that has been configured to use the SPICE protocol.</li>
  <li>Ensure USB support is set to <strong>Native</strong>:</li>
</ol>

<!-- -->

<ol>
  <li>Click the <strong>Edit</strong> button to open the <strong>Edit Virtual Machine</strong> window.</li>
  <li>Click the <strong>Console</strong> tab.</li>
  <li>From the <strong>USB Support</strong> drop-down menu, select <strong>Native</strong>.</li>
  <li>Click <strong>OK</strong>.</li>
</ol>

<li>
  <p>Right-click the virtual machine and click <strong>Edit Console Options</strong> to open the <strong>Console Options</strong>' window, and select the <strong>Enable USB Auto-Share</strong> check box.</p>

</li>
<li>
  <p>Start the virtual machine and click the <strong>Console</strong> button to connect to that virtual machine. When you plug your USB device into the client machine, it will automatically be redirected to appear on your guest machine.</p>

</li>
<p>&lt;/ol&gt;
### Using USB Devices on Virtual Machines - Legacy Mode</p>

<p>Legacy mode for USB redirection enables the SPICE USB redirection policy used in oVirt 3.0. Legacy mode must be manually configured.</p>

<p>Legacy USB mode is supported on the following clients and guests:</p>

<ul>
  <li>Client
    <ul>
      <li>Red Hat Enterprise Linux 6.0 and higher</li>
      <li>Red Hat Enterprise Linux 5.5 and higher</li>
      <li>Windows XP</li>
      <li>Windows 7</li>
      <li>Windows 2008</li>
    </ul>
  </li>
  <li>Guest
    <ul>
      <li>Windows XP</li>
      <li>Windows 7</li>
    </ul>
  </li>
</ul>

<h4 id="configuring-a-linux-client-to-use-usb-redirection-in-legacy-mode">Configuring a Linux Client to Use USB Redirection in Legacy Mode</h4>

<p>If you connect to a virtual guest from a Red Hat Enterprise Linux client machine, you have to install several SPICE packages before you can share USB devices between the client and the guest.</p>

<p><strong>Procedure 7.3. Using USB devices on Red Hat Enterprise Linux clients:</strong></p>

<ol>
  <li>Install SPICE packages on client
 On your Linux client machine, install the following packages:
    <ul>
      <li>spice-usb-share</li>
      <li>kmod-kspiceusb-rhel60 for Red Hat Enterprise Linux 6 or</li>
      <li>kmod-kspiceusb-rhel5u6 for Red Hat Enterprise Linux 5</li>
    </ul>

    <p>These packages are available on the Red Hat Network, from the Red Hat Enterprise Linux Supplementary Software channel for your version of Red Hat Enterprise Linux. To install the packages, run:
 # yum install spice-usb-share kmod-kspiceusb</p>
  </li>
  <li>
    <p>Run SPICE USB services
Start the <strong>spiceusbsrvd</strong> service and load the <strong>kspiceusb</strong> module. Run:
 # service spiceusbsrvd start
<code>&nbsp;&nbsp;&nbsp;#&nbsp;modprobe&nbsp;kspiceusb</code></p>
  </li>
  <li>Install RHEV-Tools on guest
 Locate the CD drive to access the contents of the Guest Tools ISO, and launch <code>RHEV-ToolsSetup.exe</code>. If the Guest Tools ISO is not available in your CD drive, contact your system administrator. After the tools have been installed, you will be prompted to restart the machine for changes to be applied.</li>
  <li>Open firewall ports
 Allow connections on TCP port 32023 on any firewalls between the guest machine and the client machine.</li>
  <li>Enable USB Auto-Share
On the User Portal, select your guest machine. Ensure that you have enabled SPICE USB Auto-Share on the guest machine.</li>
  <li>
    <p>Attach USB device
 Connect to your guest machine. Place the SPICE console window of your guest desktop in focus, then attach a USB device to the client. The USB device displays in your guest desktop.
<img alt="List of Connected USB devices - Linux Client" title="List of Connected USB devices - Linux Client" src="./OVirt User Guide — oVirt_files/List_of_Connected_Devices.png"></p>

    <p><strong>Figure 7.1. List of Connected USB devices - Linux Client</strong></p>
  </li>
</ol>

<p>When you close the SPICE session the USB device will no longer be shared with the guest.</p>

<h4 id="configuring-a-windows-client-to-use-usb-redirection-in-legacy-mode">Configuring a Windows Client to Use USB Redirection in Legacy Mode</h4>

<p>If you are connecting from a Windows client machine, and wish to use USB devices on your guest, you have to enable SPICE USB redirection.</p>

<p><strong>Procedure 7.4. Enabling USB redirection on Windows:</strong></p>

<ol>
  <li>Install USB redirector package on client
On a Windows client machine, install <code>oVirt-USB-Client.exe</code>.</li>
  <li>Install RHEV-Tools on guest
Locate the CD drive to access the contents of the Guest Tools ISO, and launch <code>oVirt-ToolsSetup.exe</code>. If the Guest Tools ISO is not available in your CD drive, contact your system administrator. After the tools have been installed, you will be prompted to restart the machine for changes to be applied.</li>
  <li>Open firewall ports
Allow connections on TCP port 32023 on any firewalls between the guest machine and the client machine.</li>
  <li>Enable USB sharing On the User Portal, select your guest machine. Ensure that you have enabled SPICE USB sharing on the guest machine.</li>
  <li>
    <p>Attach USB device Connect to your guest machine and attach a USB device to the client. If the required USB device does not appear directly on the guest desktop, right-click on the SPICE frame and select USB Devices. Choose your device from the list displayed.
<img alt="List of Connected USB devices - Windows Client" title="List of Connected USB devices - Windows Client" src="./OVirt User Guide — oVirt_files/List_of_Connected_Devices-Windows.png"></p>

    <p><strong>Figure 7.2. List of Connected USB devices - Windows Client</strong></p>
  </li>
</ol>

<div class="alert alert-info">
  <p><strong>Important:</strong> When some USB devices are connected on Windows clients, the autoplay window will appear and the client will take control of the device, making it unavailable to the guest. To avoid this issue, disable USB autoplay on your Windows clients.</p>

</div>
<div class="alert alert-info">
  <p><strong>Note:</strong> You can also define additional USB policies for Windows clients, to allow or block access to certain USB devices. For details, see the sections on USB Filter Editor in the <a href="http://www.ovirt.org/documentation/admin-guide/administration-guide/">oVirt Administration Guide</a>.</p>

</div>
<p>## Configuring Single Sign-On</p>

<h3 id="configuring-single-sign-on-for-virtual-machines">Configuring Single Sign-On for Virtual Machines</h3>

<p>Configuring single sign-on allows you to automatically log in to a virtual machine using the credentials you use to log in to the User Portal. Single sign-on can be used on both Red Hat Enterprise Linux/CentOS and Windows virtual machines.</p>

<h3 id="configuring-single-sign-on-for-red-hat-enterprise-linux-virtual-machines-using-ipa-idm">Configuring Single Sign-On for Red Hat Enterprise Linux Virtual Machines Using IPA (IdM)</h3>

<p>To configure single sign-on for Red Hat Enterprise Linux virtual machines using GNOME and KDE graphical desktop environments and IPA (IdM) servers, you must install the ovirt-guest-agent package on the virtual machine and install the packages associated with your window manager.</p>

<div class="alert alert-info">
  <p><strong>Important:</strong> The following procedure assumes that you have a working IPA configuration and that the IPA domain is already joined to the Manager. You must also ensure that the clocks on the Manager, the virtual machine and the system on which IPA (IdM) is hosted are synchronized using NTP.</p>

</div>
<p><strong>Procedure 8.1. Configuring Single Sign-On for Red Hat Enterprise Linux Virtual Machines</strong></p>

<ol>
  <li>Log in to the Red Hat Enterprise Linux virtual machine.</li>
  <li>
    <p>Run the following command to enable the required channel:
    # rhn-channel –add –channel=rhel-x86_64-rhev-agent-6-server</p>
  </li>
  <li>
    <p>Run the following command to download and install the guest agent packages:
    # yum install rhevm-guest-agent</p>
  </li>
  <li>
    <p>Run the following commands to install the single sign-on packages:
    # yum install rhev-agent-pam-rhev-cred
    # yum install rhev-agent-gdm-plugin-rhevcred</p>
  </li>
  <li>
    <p>Run the following command to install the IPA packages:
    # yum install ipa-client</p>
  </li>
  <li>
    <p>Run the following command and follow the prompts to configure <strong>ipa-client</strong> and join the virtual machine to the domain:
    # ipa-client-install –permit –mkhomedir</p>

    <div class="alert alert-info">
      <p><strong>Note:</strong> In environments that use DNS obfuscation, this command should be:</p>

<pre class="highlight plaintext"><code># ipa-client-install --domain=[FQDN] --server==[FQDN]
</code></pre>

    </div>
  </li>
  <li>
    <p>Fetch the details of an IPA user:
    # getent passwd [IPA user name]</p>
  </li>
  <li>
    <p>This will return something like this:
    [some-ipa-user]:*:936600010:936600001::/home/[some-ipa-user]:/bin/sh</p>

    <p>You will need this information in the next step to create a home directory for [some-ipa-user].</p>
  </li>
  <li>Set up a home directory for the IPA user:
    <ol>
      <li>
        <p>Create the new user's home directory:
    # mkdir /home/[some-ipa-user]</p>
      </li>
      <li>
        <p>Give the new user ownership of the new user's home directory:
    # chown 935500010:936600001 /home/[some-ipa-user]</p>
      </li>
    </ol>
  </li>
</ol>

<p><strong>Result</strong></p>

<p>You have enabled single sign-on for your Red Hat Enterprise Linux virtual machine. Log in to the User Portal using the user name and password of a user configured to use single sign-on and connect to the console of the virtual machine. You will be logged in automatically.</p>

<h3 id="configuring-single-sign-on-for-red-hat-enterprise-linuxcentos-virtual-machines-using-active-directory">Configuring Single Sign-On for Red Hat Enterprise Linux/CentOS Virtual Machines Using Active Directory</h3>

<p>To configure single sign-on for Red Hat Enterprise Linux or CentOS virtual machines using GNOME and KDE graphical desktop environments and Active Directory, you must install the ovirt-guest-agent package on the virtual machine, install the packages associated with your window manager and join the virtual machine to the domain.</p>

<div class="alert alert-info">
  <p><strong>Important:</strong> The following procedure assumes that you have a working Active Directory configuration and that the Active Directory domain is already joined to the Manager. You must also ensure that the clocks on the Manager, the virtual machine and the system on which Active Directory is hosted are synchronized using NTP.</p>

</div>
<p>⁠ <strong>Procedure 8.2. Configuring Single Sign-On for Red Hat Enterprise Linux/CentOS Virtual Machines</strong></p>

<ol>
  <li>Log in to the Red Hat Enterprise Linux or CentOS virtual machine.</li>
  <li>
    <p>Run the following command to enable the required channel:
    # rhn-channel –add –channel=rhel-x86_64-rhev-agent-6-server</p>
  </li>
  <li>
    <p>Run the following command to download and install the guest agent packages:
    # yum install ovirt-guest-agent</p>
  </li>
  <li>
    <p>Run the following command to install the single sign-on packages:
    # yum install ovirt-agent-gdm-plugin-rhevcred</p>
  </li>
  <li>
    <p>Run the following command to install the Samba client packages:
    # yum install samba-client samba-winbind samba-winbind-clients</p>
  </li>
  <li>
    <p>On the virtual machine, modify the <code>/etc/samba/smb.conf</code> file to contain the following, replacing <code>DOMAIN</code> with the short domain name and <code>REALM.LOCAL</code> with the Active Directory realm:
    [global]
           workgroup = DOMAIN
           realm = REALM.LOCAL
           log level = 2
           syslog = 0
           server string = Linux File Server
           security = ads
           log file = /var/log/samba/%m
           max log size = 50
           printcap name = cups
           printing = cups
           winbind enum users = Yes
           winbind enum groups = Yes
           winbind use default domain = true
           winbind separator = +
           idmap uid = 1000000-2000000
           idmap gid = 1000000-2000000
           template shell = /bin/bash</p>
  </li>
  <li>
    <p>Run the following command to join the virtual machine to the domain:
    net ads join -U [user name]</p>
  </li>
  <li>
    <p>Run the following command to start the <strong>winbind</strong> service and ensure it starts on boot:
    # service winbind start
    # chkconfig winbind on</p>
  </li>
  <li>Run the following commands to verify that the system can communicate with Active Directory:
    <ul>
      <li>
        <p>Verify that a trust relationship has been created:
    # wbinfo -t</p>
      </li>
      <li>
        <p>Verify that you can list users:
    # wbinfo -u</p>
      </li>
      <li>
        <p>Verify that you can list groups:
    # wbinfo -g</p>
      </li>
    </ul>
  </li>
  <li>Run the following command to configure the NSS and PAM stack:
    <ol>
      <li>
        <p>Run the following command to open the <strong>Authentication Configuration</strong> window:
    # authconfig-tui</p>
      </li>
      <li>Select the '''Use Winbind check box, select <strong>Next</strong> and press <strong>Enter</strong>.</li>
      <li>Select the <strong>OK</strong> button and press <strong>Enter</strong>.</li>
    </ol>
  </li>
</ol>

<p><strong>Result</strong></p>

<p>You have enabled single sign-on for your Red Hat Enterprise Linux virtual machine. Log in to the User Portal using the user name and password of a user configured to use single sign-on and connect to the console of the virtual machine. You will be logged in automatically.</p>

<h3 id="configuring-single-sign-on-for-windows-virtual-machines">Configuring Single Sign-On for Windows Virtual Machines</h3>

<p>To configure single sign-on for Windows virtual machines, the Windows guest agent must be installed on the guest virtual machine. The <code>oVirt Guest Tools ISO</code> file provides this agent. If the <code>oVirt-toolsSetup.iso</code> image is not available in your ISO domain, contact your system administrator. ⁠</p>

<p><strong>Procedure 8.3. Configuring Single Sign-On for Windows Virtual Machines</strong></p>

<ol>
  <li>From the <strong>Extended</strong> tab of the User Portal, select the Windows virtual machine. Ensure the machine is powered up, then click the <strong>Change CD</strong> button.</li>
  <li>From the list of images, select <code>oVirt-toolsSetup.iso</code>. Click <strong>OK</strong>.</li>
  <li>Once you have attached the guest tools, click the <strong>Console</strong> icon and log in to the virtual machine.</li>
  <li>On the virtual machine, locate the CD drive to access the contents of the guest tools ISO file and launch <strong>oVirt-ToolsSetup.exe</strong>. After the tools have been installed, you will be prompted to restart the machine to apply the changes.</li>
</ol>

<p><strong>Result</strong></p>

<p>You have enabled single sign-on for your Windows virtual machine. Log in to the User Portal using the user name and password of a user configured to use single sign-on and connect to the console of the virtual machine. You will be logged in automatically.</p>

<h2 id="legal-notice">Legal Notice</h2>

<p>Copyright © 2014 Red Hat, Inc.</p>

<p>This document is licensed by Red Hat under the <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>. If you distribute this document, or a modified version of it, you must provide attribution to Red Hat, Inc. and provide a link to the original. If the document is modified, all Red Hat trademarks must be removed.</p>

<p>Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.</p>

<p>Red Hat, Red Hat Enterprise Linux, the Shadowman logo, JBoss, MetaMatrix, Fedora, the Infinity Logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.</p>

<p>Linux® is the registered trademark of Linus Torvalds in the United States and other countries.</p>

<p>Java® is a registered trademark of Oracle and/or its affiliates.</p>

<p>XFS® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.</p>

<p>MySQL® is a registered trademark of MySQL AB in the United States, the European Union and other countries.</p>

<p>Node.js® is an official trademark of Joyent. Red Hat Software Collections is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.</p>

<p>The OpenStack® Word Mark and OpenStack Logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.</p>

<p>All other trademarks are the property of their respective owners.</p>

<h2 id="authors-and-revision-history">Authors and Revision History</h2>

<p><strong>Jodi Biddle</strong></p>

<pre class="highlight plaintext"><code>  jbiddle@redhat.com
</code></pre>

<p><strong>Lucinda Bopf</strong></p>

<pre class="highlight plaintext"><code>  lbopf@redhat.com
</code></pre>

<p><strong>Andrew Burden</strong></p>

<pre class="highlight plaintext"><code>  aburden@redhat.com
</code></pre>

<p><em>' Zac Dover</em>'</p>

<pre class="highlight plaintext"><code>  zdover@redhat.com
</code></pre>

<p><strong>Tim Hildred</strong></p>

<pre class="highlight plaintext"><code>  thildred@redhat.com
</code></pre>

<p><strong>Dayle Parker</strong></p>

<pre class="highlight plaintext"><code>  dayparke@redhat.com
</code></pre>

<p><strong>Brian Proffitt</strong></p>

<pre class="highlight plaintext"><code>  bkp@redhat.com
</code></pre>

<h3 id="revision-history">Revision History</h3>

<p>Revision 3.4-20</p>

<p>Fri 3 Oct 2014</p>

<p>Brian Proffitt</p>

<p>Converted to oVirt-oriented documentation.</p>

<p>Revision 3.4-19</p>

<p>Fri 27 Jun 2014</p>

<p>Andrew Dahms</p>

<table>
  <tbody>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1093492">BZ#1093492</a> - Outlined the difference between the methods for sealing a Linux virtual machine.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-17</p>

<p>Wed 11 Jun 2014</p>

<p>Andrew Burden</p>

<table>
  <tbody>
    <tr>
      <td>Brewing for 3.4 GA.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-16</p>

<p>Fri 6 Jun 2014</p>

<p>Andrew Dahms</p>

<table>
  <tbody>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=996570">BZ#996570</a> - Updated the list of console options for the SPICE and VNC connection protocols.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-14</p>

<p>Thurs 24 Apr 2014</p>

<p>Timothy Poitras</p>

<table>
  <tbody>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1075477">BZ#1075477</a> - Updated note re: enabling/disabling SSO on VMs.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-13</p>

<p>Tue 22 Apr 2014</p>

<p>Lucy Bopf</p>

<table>
  <tbody>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1088716">BZ#1088716</a> - Updated screen shots for User Portal (Basic and Extended) to include new reboot button.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-10</p>

<p>Wed 16 Apr 2014</p>

<p>Timothy Poitras</p>

<table>
  <tbody>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1085670">BZ#1085670</a> - Tidied tagging and syntax in multiple topics.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-9</p>

<p>Tue 15 Apr 2014</p>

<p>Lucy Bopf</p>

<table>
  <tbody>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1075919">BZ#1075919</a> - Added a list of parameters that can be changed while a Virtual Machine is running.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-8</p>

<p>Thu 03 Apr 2014</p>

<p>Andrew Dahms</p>

<table>
  <tbody>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1091596">BZ#1091596</a> - Added a note that console settings for virtual machines taken from virtual machine pools are persistent.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1088648">BZ#1088648</a> - Updated the description of selecting virtual machines in procedures involving virtual machine properties.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1085786">BZ#1085786</a> - Clarified that the Run Stateless option is only enabled on virtual machines with virtual disks.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1080398">BZ#1081744</a> - Updated the description of the DataCenterAdmin role.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1076282">BZ#1076282</a> - Added a note outlining that the name of the base template is retained for cloned virtual machines.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1074421">BZ#1074421</a> - Added an explanation of how to add and configure watchdogs.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1071044">BZ#1071044</a> - Added a description of how to manually associate console.vv files with Remote Viewer.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1039217">BZ#1039217</a> - Updated the description of how to install and access console components.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-7</p>

<p>Wed 02 Apr 2014</p>

<p>Lucy Bopf</p>

<table>
  <tbody>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1076892">BZ#1076892</a> - Added the VNC Keyboard Layout option in the Run Once window.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1076318">BZ#1076318</a> - Updated and added procedures and screen shots to include new Reboot button.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1075526">BZ#1075526</a> - Updated and added procedures and screen shots for creating and previewing snapshots.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-6</p>

<p>Tue 01 Apr 2014</p>

<p>Zac Dover</p>

<table>
  <tbody>
    <tr>
      <td>Beta build with Publican 3.99 for rhevm-doc - altered spec.tmpl</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-3</p>

<p>Thu 27 Mar 2014</p>

<p>Andrew Dahms</p>

<table>
  <tbody>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1081268">BZ#1081268</a> - Updated the procedure for changing the CD accessible to a virtual machine.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1076283">BZ#1076283</a> - Added an explanation of how to configure Cloud-Init settings for virtual machines and templates.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1075492">BZ#1075492</a> - Updated sections on creating and using templates to outline the new template sub version feature.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1075487">BZ#1075487</a> - Added an explanation of how to configure persistent Cloud-Init settings.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-2</p>

<p>Thu 20 Mar 2014</p>

<p>Andrew Dahms</p>

<table>
  <tbody>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1078606">BZ#1078606</a> - Updated the location of the USB Clerk and Virt Viewer .msi files.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1075878">BZ#1075878</a> - Updated the procedure for removing virtual disks from virtual machines.</td>
    </tr>
    <tr>
      <td><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1043433">BZ#1043433</a> - Added a description of how to ensure USB support is set to native for USB redirection.</td>
    </tr>
  </tbody>
</table>

<p>Revision 3.4-1</p>

<p>Mon 17 Mar 2014</p>

<p>Andrew Dahms</p>

<table>
  <tbody>
    <tr>
      <td>Initial creation for the Red Hat Enterprise Virtualization 3.4 release.</td>
    </tr>
  </tbody>
</table>

</section>
</section>
</section>
<footer class="text-center" id="footer">
<hr class="visible-print">
<ul class="footer-nav-list">
<li><a target="_blank" href="http://www.ovirt.org/privacy/">Privacy policy</a></li>
<li><a target="_blank" href="http://www.ovirt.org/about/">About</a></li>
<li><a target="_blank" href="http://www.ovirt.org/disclaimers/">Disclaimers</a></li>
</ul>

© 2013–2016 oVirt
<div class="edit-this-page">
<a target="_blank" href="https://github.com/oVirt/ovirt-site/edit/master/source/documentation/user-guide/user-guide.html.md"><i class="icon fa fa-pencil"></i>Edit this page on GitHub</a>
</div>
<div class="last-modified">
Page last modified
Mon 30 Nov 2015 19:41 UTC
</div>
</footer>


<script src="./OVirt User Guide — oVirt_files/application.js" type="text/javascript"></script>

<!-- eloqua -->
<script src="http://www.redhat.com/j/elqNow/elqCfg.js" type="text/javascript"></script>
<script src="http://www.redhat.com/j/elqNow/elqImg.js" type="text/javascript"></script>



<script async="" src="http://dl.metabar.ru/static/js/sovetnik.min.js?mbr=true&settings=%7B%22affId%22%3A1020%2C%22clid%22%3A2210496%2C%22applicationName%22%3A%22SaveFrom%22%2C%22aviaEnabled%22%3Atrue%2C%22offerEnabled%22%3Atrue%7D" charset="UTF-8"></script></body></html>
